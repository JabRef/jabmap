var vr=Object.defineProperty;var dn=n=>{throw TypeError(n)};var mr=(n,t,e)=>t in n?vr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var J=(n,t,e)=>mr(n,typeof t!="symbol"?t+"":t,e),di=(n,t,e)=>t.has(n)||dn("Cannot "+e);var O=(n,t,e)=>(di(n,t,"read from private field"),e?e.call(n):t.get(n)),Pt=(n,t,e)=>t.has(n)?dn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),_e=(n,t,e,i)=>(di(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),R=(n,t,e)=>(di(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var W="top",G="bottom",X="right",K="left",Je="auto",ae=[W,G,X,K],zt="start",te="end",Xn="clippingParents",Pi="viewport",qt="popper",Qn="reference",Si=ae.reduce(function(n,t){return n.concat([t+"-"+zt,t+"-"+te])},[]),Ri=[].concat(ae,[Je]).reduce(function(n,t){return n.concat([t,t+"-"+zt,t+"-"+te])},[]),Jn="beforeRead",Zn="read",ts="afterRead",es="beforeMain",is="main",ns="afterMain",ss="beforeWrite",rs="write",os="afterWrite",as=[Jn,Zn,ts,es,is,ns,ss,rs,os];function ft(n){return n?(n.nodeName||"").toLowerCase():null}function Q(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Vt(n){var t=Q(n).Element;return n instanceof t||n instanceof Element}function et(n){var t=Q(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function ji(n){if(typeof ShadowRoot>"u")return!1;var t=Q(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function wr(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},r=t.elements[e];!et(r)||!ft(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function br(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,h){return l[h]="",l},{});!et(s)||!ft(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const Bi={name:"applyStyles",enabled:!0,phase:"write",fn:wr,effect:br,requires:["computeStyles"]};function _t(n){return n.split("-")[0]}var Bt=Math.max,Ye=Math.min,ee=Math.round;function Ni(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ls(){return!/^((?!chrome|android).)*safari/i.test(Ni())}function ie(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=n.getBoundingClientRect(),s=1,r=1;t&&et(n)&&(s=n.offsetWidth>0&&ee(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&ee(i.height)/n.offsetHeight||1);var o=Vt(n)?Q(n):window,a=o.visualViewport,l=!ls()&&e,h=(i.left+(l&&a?a.offsetLeft:0))/s,c=(i.top+(l&&a?a.offsetTop:0))/r,f=i.width/s,g=i.height/r;return{width:f,height:g,top:c,right:h+f,bottom:c+g,left:h,x:h,y:c}}function zi(n){var t=ie(n),e=n.offsetWidth,i=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:i}}function cs(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&ji(e)){var i=t;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function mt(n){return Q(n).getComputedStyle(n)}function yr(n){return["table","td","th"].indexOf(ft(n))>=0}function St(n){return((Vt(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ze(n){return ft(n)==="html"?n:n.assignedSlot||n.parentNode||(ji(n)?n.host:null)||St(n)}function un(n){return!et(n)||mt(n).position==="fixed"?null:n.offsetParent}function Er(n){var t=/firefox/i.test(Ni()),e=/Trident/i.test(Ni());if(e&&et(n)){var i=mt(n);if(i.position==="fixed")return null}var s=Ze(n);for(ji(s)&&(s=s.host);et(s)&&["html","body"].indexOf(ft(s))<0;){var r=mt(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Te(n){for(var t=Q(n),e=un(n);e&&yr(e)&&mt(e).position==="static";)e=un(e);return e&&(ft(e)==="html"||ft(e)==="body"&&mt(e).position==="static")?t:e||Er(n)||t}function Vi(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function me(n,t,e){return Bt(n,Ye(t,e))}function Tr(n,t,e){var i=me(n,t,e);return i>e?e:i}function hs(){return{top:0,right:0,bottom:0,left:0}}function ds(n){return Object.assign({},hs(),n)}function us(n,t){return t.reduce(function(e,i){return e[i]=n,e},{})}var Ar=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,ds(typeof t!="number"?t:us(t,ae))};function xr(n){var t,e=n.state,i=n.name,s=n.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=_t(e.placement),l=Vi(a),h=[K,X].indexOf(a)>=0,c=h?"height":"width";if(!(!r||!o)){var f=Ar(s.padding,e),g=zi(r),p=l==="y"?W:K,T=l==="y"?G:X,v=e.rects.reference[c]+e.rects.reference[l]-o[l]-e.rects.popper[c],b=o[l]-e.rects.reference[l],A=Te(r),N=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,$=v/2-b/2,y=f[p],x=N-g[c]-f[T],C=N/2-g[c]/2+$,D=me(y,C,x),B=l;e.modifiersData[i]=(t={},t[B]=D,t.centerOffset=D-C,t)}}function Cr(n){var t=n.state,e=n.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||cs(t.elements.popper,s)&&(t.elements.arrow=s))}const _s={name:"arrow",enabled:!0,phase:"main",fn:xr,effect:Cr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ne(n){return n.split("-")[1]}var Or={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Sr(n,t){var e=n.x,i=n.y,s=t.devicePixelRatio||1;return{x:ee(e*s)/s||0,y:ee(i*s)/s||0}}function _n(n){var t,e=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,h=n.adaptive,c=n.roundOffsets,f=n.isFixed,g=o.x,p=g===void 0?0:g,T=o.y,v=T===void 0?0:T,b=typeof c=="function"?c({x:p,y:v}):{x:p,y:v};p=b.x,v=b.y;var A=o.hasOwnProperty("x"),N=o.hasOwnProperty("y"),$=K,y=W,x=window;if(h){var C=Te(e),D="clientHeight",B="clientWidth";if(C===Q(e)&&(C=St(e),mt(C).position!=="static"&&a==="absolute"&&(D="scrollHeight",B="scrollWidth")),C=C,s===W||(s===K||s===X)&&r===te){y=G;var P=f&&C===x&&x.visualViewport?x.visualViewport.height:C[D];v-=P-i.height,v*=l?1:-1}if(s===K||(s===W||s===G)&&r===te){$=X;var k=f&&C===x&&x.visualViewport?x.visualViewport.width:C[B];p-=k-i.width,p*=l?1:-1}}var z=Object.assign({position:a},h&&Or),rt=c===!0?Sr({x:p,y:v},Q(e)):{x:p,y:v};if(p=rt.x,v=rt.y,l){var H;return Object.assign({},z,(H={},H[y]=N?"0":"",H[$]=A?"0":"",H.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",H))}return Object.assign({},z,(t={},t[y]=N?v+"px":"",t[$]=A?p+"px":"",t.transform="",t))}function Nr(n){var t=n.state,e=n.options,i=e.gpuAcceleration,s=i===void 0?!0:i,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,l=a===void 0?!0:a,h={placement:_t(t.placement),variation:ne(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,_n(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,_n(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Hi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nr,data:{}};var Ie={passive:!0};function Lr(n){var t=n.state,e=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=Q(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&h.forEach(function(c){c.addEventListener("scroll",e.update,Ie)}),a&&l.addEventListener("resize",e.update,Ie),function(){r&&h.forEach(function(c){c.removeEventListener("scroll",e.update,Ie)}),a&&l.removeEventListener("resize",e.update,Ie)}}const Fi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Lr,data:{}};var Dr={left:"right",right:"left",bottom:"top",top:"bottom"};function Ve(n){return n.replace(/left|right|bottom|top/g,function(t){return Dr[t]})}var $r={start:"end",end:"start"};function fn(n){return n.replace(/start|end/g,function(t){return $r[t]})}function Wi(n){var t=Q(n),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Ki(n){return ie(St(n)).left+Wi(n).scrollLeft}function Ir(n,t){var e=Q(n),i=St(n),s=e.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var h=ls();(h||!h&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+Ki(n),y:l}}function kr(n){var t,e=St(n),i=Wi(n),s=(t=n.ownerDocument)==null?void 0:t.body,r=Bt(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Bt(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Ki(n),l=-i.scrollTop;return mt(s||e).direction==="rtl"&&(a+=Bt(e.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Yi(n){var t=mt(n),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function fs(n){return["html","body","#document"].indexOf(ft(n))>=0?n.ownerDocument.body:et(n)&&Yi(n)?n:fs(Ze(n))}function we(n,t){var e;t===void 0&&(t=[]);var i=fs(n),s=i===((e=n.ownerDocument)==null?void 0:e.body),r=Q(i),o=s?[r].concat(r.visualViewport||[],Yi(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(we(Ze(o)))}function Li(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Mr(n,t){var e=ie(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function pn(n,t,e){return t===Pi?Li(Ir(n,e)):Vt(t)?Mr(t,e):Li(kr(St(n)))}function Pr(n){var t=we(Ze(n)),e=["absolute","fixed"].indexOf(mt(n).position)>=0,i=e&&et(n)?Te(n):n;return Vt(i)?t.filter(function(s){return Vt(s)&&cs(s,i)&&ft(s)!=="body"}):[]}function Rr(n,t,e,i){var s=t==="clippingParents"?Pr(n):[].concat(t),r=[].concat(s,[e]),o=r[0],a=r.reduce(function(l,h){var c=pn(n,h,i);return l.top=Bt(c.top,l.top),l.right=Ye(c.right,l.right),l.bottom=Ye(c.bottom,l.bottom),l.left=Bt(c.left,l.left),l},pn(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ps(n){var t=n.reference,e=n.element,i=n.placement,s=i?_t(i):null,r=i?ne(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case W:l={x:o,y:t.y-e.height};break;case G:l={x:o,y:t.y+t.height};break;case X:l={x:t.x+t.width,y:a};break;case K:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var h=s?Vi(s):null;if(h!=null){var c=h==="y"?"height":"width";switch(r){case zt:l[h]=l[h]-(t[c]/2-e[c]/2);break;case te:l[h]=l[h]+(t[c]/2-e[c]/2);break}}return l}function se(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=i===void 0?n.placement:i,r=e.strategy,o=r===void 0?n.strategy:r,a=e.boundary,l=a===void 0?Xn:a,h=e.rootBoundary,c=h===void 0?Pi:h,f=e.elementContext,g=f===void 0?qt:f,p=e.altBoundary,T=p===void 0?!1:p,v=e.padding,b=v===void 0?0:v,A=ds(typeof b!="number"?b:us(b,ae)),N=g===qt?Qn:qt,$=n.rects.popper,y=n.elements[T?N:g],x=Rr(Vt(y)?y:y.contextElement||St(n.elements.popper),l,c,o),C=ie(n.elements.reference),D=ps({reference:C,element:$,placement:s}),B=Li(Object.assign({},$,D)),P=g===qt?B:C,k={top:x.top-P.top+A.top,bottom:P.bottom-x.bottom+A.bottom,left:x.left-P.left+A.left,right:P.right-x.right+A.right},z=n.modifiersData.offset;if(g===qt&&z){var rt=z[s];Object.keys(k).forEach(function(H){var Dt=[X,G].indexOf(H)>=0?1:-1,$t=[W,G].indexOf(H)>=0?"y":"x";k[H]+=rt[$t]*Dt})}return k}function jr(n,t){t===void 0&&(t={});var e=t,i=e.placement,s=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,h=l===void 0?Ri:l,c=ne(i),f=c?a?Si:Si.filter(function(T){return ne(T)===c}):ae,g=f.filter(function(T){return h.indexOf(T)>=0});g.length===0&&(g=f);var p=g.reduce(function(T,v){return T[v]=se(n,{placement:v,boundary:s,rootBoundary:r,padding:o})[_t(v)],T},{});return Object.keys(p).sort(function(T,v){return p[T]-p[v]})}function Br(n){if(_t(n)===Je)return[];var t=Ve(n);return[fn(n),t,fn(t)]}function zr(n){var t=n.state,e=n.options,i=n.name;if(!t.modifiersData[i]._skip){for(var s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,h=e.padding,c=e.boundary,f=e.rootBoundary,g=e.altBoundary,p=e.flipVariations,T=p===void 0?!0:p,v=e.allowedAutoPlacements,b=t.options.placement,A=_t(b),N=A===b,$=l||(N||!T?[Ve(b)]:Br(b)),y=[b].concat($).reduce(function(Kt,bt){return Kt.concat(_t(bt)===Je?jr(t,{placement:bt,boundary:c,rootBoundary:f,padding:h,flipVariations:T,allowedAutoPlacements:v}):bt)},[]),x=t.rects.reference,C=t.rects.popper,D=new Map,B=!0,P=y[0],k=0;k<y.length;k++){var z=y[k],rt=_t(z),H=ne(z)===zt,Dt=[W,G].indexOf(rt)>=0,$t=Dt?"width":"height",U=se(t,{placement:z,boundary:c,rootBoundary:f,altBoundary:g,padding:h}),ot=Dt?H?X:K:H?G:W;x[$t]>C[$t]&&(ot=Ve(ot));var Se=Ve(ot),It=[];if(r&&It.push(U[rt]<=0),a&&It.push(U[ot]<=0,U[Se]<=0),It.every(function(Kt){return Kt})){P=z,B=!1;break}D.set(z,It)}if(B)for(var Ne=T?3:1,ai=function(bt){var ue=y.find(function(De){var kt=D.get(De);if(kt)return kt.slice(0,bt).every(function(li){return li})});if(ue)return P=ue,"break"},de=Ne;de>0;de--){var Le=ai(de);if(Le==="break")break}t.placement!==P&&(t.modifiersData[i]._skip=!0,t.placement=P,t.reset=!0)}}const gs={name:"flip",enabled:!0,phase:"main",fn:zr,requiresIfExists:["offset"],data:{_skip:!1}};function gn(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function vn(n){return[W,X,G,K].some(function(t){return n[t]>=0})}function Vr(n){var t=n.state,e=n.name,i=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,o=se(t,{elementContext:"reference"}),a=se(t,{altBoundary:!0}),l=gn(o,i),h=gn(a,s,r),c=vn(l),f=vn(h);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const vs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vr};function Hr(n,t,e){var i=_t(n),s=[K,W].indexOf(i)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[K,X].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Fr(n){var t=n.state,e=n.options,i=n.name,s=e.offset,r=s===void 0?[0,0]:s,o=Ri.reduce(function(c,f){return c[f]=Hr(f,t.rects,r),c},{}),a=o[t.placement],l=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=h),t.modifiersData[i]=o}const ms={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Fr};function Wr(n){var t=n.state,e=n.name;t.modifiersData[e]=ps({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Ui={name:"popperOffsets",enabled:!0,phase:"read",fn:Wr,data:{}};function Kr(n){return n==="x"?"y":"x"}function Yr(n){var t=n.state,e=n.options,i=n.name,s=e.mainAxis,r=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,h=e.rootBoundary,c=e.altBoundary,f=e.padding,g=e.tether,p=g===void 0?!0:g,T=e.tetherOffset,v=T===void 0?0:T,b=se(t,{boundary:l,rootBoundary:h,padding:f,altBoundary:c}),A=_t(t.placement),N=ne(t.placement),$=!N,y=Vi(A),x=Kr(y),C=t.modifiersData.popperOffsets,D=t.rects.reference,B=t.rects.popper,P=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,k=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,rt={x:0,y:0};if(C){if(r){var H,Dt=y==="y"?W:K,$t=y==="y"?G:X,U=y==="y"?"height":"width",ot=C[y],Se=ot+b[Dt],It=ot-b[$t],Ne=p?-B[U]/2:0,ai=N===zt?D[U]:B[U],de=N===zt?-B[U]:-D[U],Le=t.elements.arrow,Kt=p&&Le?zi(Le):{width:0,height:0},bt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:hs(),ue=bt[Dt],De=bt[$t],kt=me(0,D[U],Kt[U]),li=$?D[U]/2-Ne-kt-ue-k.mainAxis:ai-kt-ue-k.mainAxis,dr=$?-D[U]/2+Ne+kt+De+k.mainAxis:de+kt+De+k.mainAxis,ci=t.elements.arrow&&Te(t.elements.arrow),ur=ci?y==="y"?ci.clientTop||0:ci.clientLeft||0:0,en=(H=z==null?void 0:z[y])!=null?H:0,_r=ot+li-en-ur,fr=ot+dr-en,nn=me(p?Ye(Se,_r):Se,ot,p?Bt(It,fr):It);C[y]=nn,rt[y]=nn-ot}if(a){var sn,pr=y==="x"?W:K,gr=y==="x"?G:X,Mt=C[x],$e=x==="y"?"height":"width",rn=Mt+b[pr],on=Mt-b[gr],hi=[W,K].indexOf(A)!==-1,an=(sn=z==null?void 0:z[x])!=null?sn:0,ln=hi?rn:Mt-D[$e]-B[$e]-an+k.altAxis,cn=hi?Mt+D[$e]+B[$e]-an-k.altAxis:on,hn=p&&hi?Tr(ln,Mt,cn):me(p?ln:rn,Mt,p?cn:on);C[x]=hn,rt[x]=hn-Mt}t.modifiersData[i]=rt}}const ws={name:"preventOverflow",enabled:!0,phase:"main",fn:Yr,requiresIfExists:["offset"]};function Ur(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function qr(n){return n===Q(n)||!et(n)?Wi(n):Ur(n)}function Gr(n){var t=n.getBoundingClientRect(),e=ee(t.width)/n.offsetWidth||1,i=ee(t.height)/n.offsetHeight||1;return e!==1||i!==1}function Xr(n,t,e){e===void 0&&(e=!1);var i=et(t),s=et(t)&&Gr(t),r=St(t),o=ie(n,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((ft(t)!=="body"||Yi(r))&&(a=qr(t)),et(t)?(l=ie(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Ki(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Qr(n){var t=new Map,e=new Set,i=[];n.forEach(function(r){t.set(r.name,r)});function s(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){e.has(r.name)||s(r)}),i}function Jr(n){var t=Qr(n);return as.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function Zr(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function to(n){var t=n.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var mn={placement:"bottom",modifiers:[],strategy:"absolute"};function wn(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function ti(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,r=s===void 0?mn:s;return function(a,l,h){h===void 0&&(h=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},mn,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],g=!1,p={state:c,setOptions:function(A){var N=typeof A=="function"?A(c.options):A;v(),c.options=Object.assign({},r,c.options,N),c.scrollParents={reference:Vt(a)?we(a):a.contextElement?we(a.contextElement):[],popper:we(l)};var $=Jr(to([].concat(i,c.options.modifiers)));return c.orderedModifiers=$.filter(function(y){return y.enabled}),T(),p.update()},forceUpdate:function(){if(!g){var A=c.elements,N=A.reference,$=A.popper;if(wn(N,$)){c.rects={reference:Xr(N,Te($),c.options.strategy==="fixed"),popper:zi($)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var x=c.orderedModifiers[y],C=x.fn,D=x.options,B=D===void 0?{}:D,P=x.name;typeof C=="function"&&(c=C({state:c,options:B,name:P,instance:p})||c)}}}},update:Zr(function(){return new Promise(function(b){p.forceUpdate(),b(c)})}),destroy:function(){v(),g=!0}};if(!wn(a,l))return p;p.setOptions(h).then(function(b){!g&&h.onFirstUpdate&&h.onFirstUpdate(b)});function T(){c.orderedModifiers.forEach(function(b){var A=b.name,N=b.options,$=N===void 0?{}:N,y=b.effect;if(typeof y=="function"){var x=y({state:c,name:A,instance:p,options:$}),C=function(){};f.push(x||C)}})}function v(){f.forEach(function(b){return b()}),f=[]}return p}}var eo=ti(),io=[Fi,Ui,Hi,Bi],no=ti({defaultModifiers:io}),so=[Fi,Ui,Hi,Bi,ms,gs,ws,_s,vs],qi=ti({defaultModifiers:so});const bs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ns,afterRead:ts,afterWrite:os,applyStyles:Bi,arrow:_s,auto:Je,basePlacements:ae,beforeMain:es,beforeRead:Jn,beforeWrite:ss,bottom:G,clippingParents:Xn,computeStyles:Hi,createPopper:qi,createPopperBase:eo,createPopperLite:no,detectOverflow:se,end:te,eventListeners:Fi,flip:gs,hide:vs,left:K,main:is,modifierPhases:as,offset:ms,placements:Ri,popper:qt,popperGenerator:ti,popperOffsets:Ui,preventOverflow:ws,read:Zn,reference:Qn,right:X,start:zt,top:W,variationPlacements:Si,viewport:Pi,write:rs},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const yt=new Map,ui={set(n,t,e){yt.has(n)||yt.set(n,new Map);const i=yt.get(n);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(n,t){return yt.has(n)&&yt.get(n).get(t)||null},remove(n,t){if(!yt.has(n))return;const e=yt.get(n);e.delete(t),e.size===0&&yt.delete(n)}},ro=1e6,oo=1e3,Di="transitionend",ys=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),ao=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),lo=n=>{do n+=Math.floor(Math.random()*ro);while(document.getElementById(n));return n},co=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const i=Number.parseFloat(t),s=Number.parseFloat(e);return!i&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*oo)},Es=n=>{n.dispatchEvent(new Event(Di))},gt=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),At=n=>gt(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(ys(n)):null,le=n=>{if(!gt(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const i=n.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},xt=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",Ts=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?Ts(n.parentNode):null},Ue=()=>{},Ae=n=>{n.offsetHeight},As=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_i=[],ho=n=>{document.readyState==="loading"?(_i.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of _i)t()}),_i.push(n)):n()},it=()=>document.documentElement.dir==="rtl",st=n=>{ho(()=>{const t=As();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}})},Y=(n,t=[],e=n)=>typeof n=="function"?n.call(...t):e,xs=(n,t,e=!0)=>{if(!e){Y(n);return}const s=co(t)+5;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(Di,o),Y(n))};t.addEventListener(Di,o),setTimeout(()=>{r||Es(t)},s)},Gi=(n,t,e,i)=>{const s=n.length;let r=n.indexOf(t);return r===-1?!e&&i?n[s-1]:n[0]:(r+=e?1:-1,i&&(r=(r+s)%s),n[Math.max(0,Math.min(r,s-1))])},uo=/[^.]*(?=\..*)\.|.*/,_o=/\..*/,fo=/::\d+$/,fi={};let bn=1;const Cs={mouseenter:"mouseover",mouseleave:"mouseout"},po=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Os(n,t){return t&&`${t}::${bn++}`||n.uidEvent||bn++}function Ss(n){const t=Os(n);return n.uidEvent=t,fi[t]=fi[t]||{},fi[t]}function go(n,t){return function e(i){return Xi(i,{delegateTarget:n}),e.oneOff&&d.off(n,i.type,t),t.apply(n,[i])}}function vo(n,t,e){return function i(s){const r=n.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return Xi(s,{delegateTarget:o}),i.oneOff&&d.off(n,s.type,t,e),e.apply(o,[s])}}function Ns(n,t,e=null){return Object.values(n).find(i=>i.callable===t&&i.delegationSelector===e)}function Ls(n,t,e){const i=typeof t=="string",s=i?e:t||e;let r=Ds(n);return po.has(r)||(r=n),[i,s,r]}function yn(n,t,e,i,s){if(typeof t!="string"||!n)return;let[r,o,a]=Ls(t,e,i);t in Cs&&(o=(T=>function(v){if(!v.relatedTarget||v.relatedTarget!==v.delegateTarget&&!v.delegateTarget.contains(v.relatedTarget))return T.call(this,v)})(o));const l=Ss(n),h=l[a]||(l[a]={}),c=Ns(h,o,r?e:null);if(c){c.oneOff=c.oneOff&&s;return}const f=Os(o,t.replace(uo,"")),g=r?vo(n,e,o):go(n,o);g.delegationSelector=r?e:null,g.callable=o,g.oneOff=s,g.uidEvent=f,h[f]=g,n.addEventListener(a,g,r)}function $i(n,t,e,i,s){const r=Ns(t[e],i,s);r&&(n.removeEventListener(e,r,!!s),delete t[e][r.uidEvent])}function mo(n,t,e,i){const s=t[e]||{};for(const[r,o]of Object.entries(s))r.includes(i)&&$i(n,t,e,o.callable,o.delegationSelector)}function Ds(n){return n=n.replace(_o,""),Cs[n]||n}const d={on(n,t,e,i){yn(n,t,e,i,!1)},one(n,t,e,i){yn(n,t,e,i,!0)},off(n,t,e,i){if(typeof t!="string"||!n)return;const[s,r,o]=Ls(t,e,i),a=o!==t,l=Ss(n),h=l[o]||{},c=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(h).length)return;$i(n,l,o,r,s?e:null);return}if(c)for(const f of Object.keys(l))mo(n,l,f,t.slice(1));for(const[f,g]of Object.entries(h)){const p=f.replace(fo,"");(!a||t.includes(p))&&$i(n,l,o,g.callable,g.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const i=As(),s=Ds(t),r=t!==s;let o=null,a=!0,l=!0,h=!1;r&&i&&(o=i.Event(t,e),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());const c=Xi(new Event(t,{bubbles:a,cancelable:!0}),e);return h&&c.preventDefault(),l&&n.dispatchEvent(c),c.defaultPrevented&&o&&o.preventDefault(),c}};function Xi(n,t={}){for(const[e,i]of Object.entries(t))try{n[e]=i}catch{Object.defineProperty(n,e,{configurable:!0,get(){return i}})}return n}function En(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function pi(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const vt={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${pi(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${pi(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of e){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1),t[s]=En(n.dataset[i])}return t},getDataAttribute(n,t){return En(n.getAttribute(`data-bs-${pi(t)}`))}};class xe{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=gt(e)?vt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...gt(e)?vt.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,s]of Object.entries(e)){const r=t[i],o=gt(r)?"element":ao(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}}const wo="5.3.7";class dt extends xe{constructor(t,e){super(),t=At(t),t&&(this._element=t,this._config=this._getConfig(e),ui.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ui.remove(this._element,this.constructor.DATA_KEY),d.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){xs(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return ui.get(At(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return wo}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const gi=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>ys(e)).join(","):null},_={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let i=n.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!xt(e)&&le(e))},getSelectorFromElement(n){const t=gi(n);return t&&_.findOne(t)?t:null},getElementFromSelector(n){const t=gi(n);return t?_.findOne(t):null},getMultipleElementsFromSelector(n){const t=gi(n);return t?_.find(t):[]}},ei=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;d.on(document,e,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),xt(this))return;const r=_.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(r)[t]()})},bo="alert",yo="bs.alert",$s=`.${yo}`,Eo=`close${$s}`,To=`closed${$s}`,Ao="fade",xo="show";class ii extends dt{static get NAME(){return bo}close(){if(d.trigger(this._element,Eo).defaultPrevented)return;this._element.classList.remove(xo);const e=this._element.classList.contains(Ao);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),d.trigger(this._element,To),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=ii.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}ei(ii,"close");st(ii);const Co="button",Oo="bs.button",So=`.${Oo}`,No=".data-api",Lo="active",Tn='[data-bs-toggle="button"]',Do=`click${So}${No}`;class ni extends dt{static get NAME(){return Co}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Lo))}static jQueryInterface(t){return this.each(function(){const e=ni.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}d.on(document,Do,Tn,n=>{n.preventDefault();const t=n.target.closest(Tn);ni.getOrCreateInstance(t).toggle()});st(ni);const $o="swipe",ce=".bs.swipe",Io=`touchstart${ce}`,ko=`touchmove${ce}`,Mo=`touchend${ce}`,Po=`pointerdown${ce}`,Ro=`pointerup${ce}`,jo="touch",Bo="pen",zo="pointer-event",Vo=40,Ho={endCallback:null,leftCallback:null,rightCallback:null},Fo={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class qe extends xe{constructor(t,e){super(),this._element=t,!(!t||!qe.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ho}static get DefaultType(){return Fo}static get NAME(){return $o}dispose(){d.off(this._element,ce)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Y(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Vo)return;const e=t/this._deltaX;this._deltaX=0,e&&Y(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(d.on(this._element,Po,t=>this._start(t)),d.on(this._element,Ro,t=>this._end(t)),this._element.classList.add(zo)):(d.on(this._element,Io,t=>this._start(t)),d.on(this._element,ko,t=>this._move(t)),d.on(this._element,Mo,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Bo||t.pointerType===jo)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Wo="carousel",Ko="bs.carousel",Nt=`.${Ko}`,Is=".data-api",Yo="ArrowLeft",Uo="ArrowRight",qo=500,fe="next",Yt="prev",Gt="left",He="right",Go=`slide${Nt}`,vi=`slid${Nt}`,Xo=`keydown${Nt}`,Qo=`mouseenter${Nt}`,Jo=`mouseleave${Nt}`,Zo=`dragstart${Nt}`,ta=`load${Nt}${Is}`,ea=`click${Nt}${Is}`,ks="carousel",ke="active",ia="slide",na="carousel-item-end",sa="carousel-item-start",ra="carousel-item-next",oa="carousel-item-prev",Ms=".active",Ps=".carousel-item",aa=Ms+Ps,la=".carousel-item img",ca=".carousel-indicators",ha="[data-bs-slide], [data-bs-slide-to]",da='[data-bs-ride="carousel"]',ua={[Yo]:He,[Uo]:Gt},_a={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},fa={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ce extends dt{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=_.findOne(ca,this._element),this._addEventListeners(),this._config.ride===ks&&this.cycle()}static get Default(){return _a}static get DefaultType(){return fa}static get NAME(){return Wo}next(){this._slide(fe)}nextWhenVisible(){!document.hidden&&le(this._element)&&this.next()}prev(){this._slide(Yt)}pause(){this._isSliding&&Es(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){d.one(this._element,vi,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){d.one(this._element,vi,()=>this.to(t));return}const i=this._getItemIndex(this._getActive());if(i===t)return;const s=t>i?fe:Yt;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&d.on(this._element,Xo,t=>this._keydown(t)),this._config.pause==="hover"&&(d.on(this._element,Qo,()=>this.pause()),d.on(this._element,Jo,()=>this._maybeEnableCycle())),this._config.touch&&qe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of _.find(la,this._element))d.on(i,Zo,s=>s.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Gt)),rightCallback:()=>this._slide(this._directionToOrder(He)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),qo+this._config.interval))}};this._swipeHelper=new qe(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=ua[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=_.findOne(Ms,this._indicatorsElement);e.classList.remove(ke),e.removeAttribute("aria-current");const i=_.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(ke),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const i=this._getActive(),s=t===fe,r=e||Gi(this._getItems(),i,s,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),a=p=>d.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(Go).defaultPrevented||!i||!r)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const c=s?sa:na,f=s?ra:oa;r.classList.add(f),Ae(r),i.classList.add(c),r.classList.add(c);const g=()=>{r.classList.remove(c,f),r.classList.add(ke),i.classList.remove(ke,f,c),this._isSliding=!1,a(vi)};this._queueCallback(g,i,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(ia)}_getActive(){return _.findOne(aa,this._element)}_getItems(){return _.find(Ps,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return it()?t===Gt?Yt:fe:t===Gt?fe:Yt}_orderToDirection(t){return it()?t===Yt?Gt:He:t===Yt?He:Gt}static jQueryInterface(t){return this.each(function(){const e=Ce.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}d.on(document,ea,ha,function(n){const t=_.getElementFromSelector(this);if(!t||!t.classList.contains(ks))return;n.preventDefault();const e=Ce.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(vt.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});d.on(window,ta,()=>{const n=_.find(da);for(const t of n)Ce.getOrCreateInstance(t)});st(Ce);const pa="collapse",ga="bs.collapse",Oe=`.${ga}`,va=".data-api",ma=`show${Oe}`,wa=`shown${Oe}`,ba=`hide${Oe}`,ya=`hidden${Oe}`,Ea=`click${Oe}${va}`,mi="show",Qt="collapse",Me="collapsing",Ta="collapsed",Aa=`:scope .${Qt} .${Qt}`,xa="collapse-horizontal",Ca="width",Oa="height",Sa=".collapse.show, .collapse.collapsing",Ii='[data-bs-toggle="collapse"]',Na={parent:null,toggle:!0},La={parent:"(null|element)",toggle:"boolean"};class be extends dt{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=_.find(Ii);for(const s of i){const r=_.getSelectorFromElement(s),o=_.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Na}static get DefaultType(){return La}static get NAME(){return pa}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Sa).filter(a=>a!==this._element).map(a=>be.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||d.trigger(this._element,ma).defaultPrevented)return;for(const a of t)a.hide();const i=this._getDimension();this._element.classList.remove(Qt),this._element.classList.add(Me),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Me),this._element.classList.add(Qt,mi),this._element.style[i]="",d.trigger(this._element,wa)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||d.trigger(this._element,ba).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ae(this._element),this._element.classList.add(Me),this._element.classList.remove(Qt,mi);for(const s of this._triggerArray){const r=_.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Me),this._element.classList.add(Qt),d.trigger(this._element,ya)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(mi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=At(t.parent),t}_getDimension(){return this._element.classList.contains(xa)?Ca:Oa}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ii);for(const e of t){const i=_.getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){const e=_.find(Aa,this._config.parent);return _.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle(Ta,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const i=be.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}}d.on(document,Ea,Ii,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of _.getMultipleElementsFromSelector(this))be.getOrCreateInstance(t,{toggle:!1}).toggle()});st(be);const An="dropdown",Da="bs.dropdown",Ft=`.${Da}`,Qi=".data-api",$a="Escape",xn="Tab",Ia="ArrowUp",Cn="ArrowDown",ka=2,Ma=`hide${Ft}`,Pa=`hidden${Ft}`,Ra=`show${Ft}`,ja=`shown${Ft}`,Rs=`click${Ft}${Qi}`,js=`keydown${Ft}${Qi}`,Ba=`keyup${Ft}${Qi}`,Xt="show",za="dropup",Va="dropend",Ha="dropstart",Fa="dropup-center",Wa="dropdown-center",Rt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ka=`${Rt}.${Xt}`,Fe=".dropdown-menu",Ya=".navbar",Ua=".navbar-nav",qa=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Ga=it()?"top-end":"top-start",Xa=it()?"top-start":"top-end",Qa=it()?"bottom-end":"bottom-start",Ja=it()?"bottom-start":"bottom-end",Za=it()?"left-start":"right-start",tl=it()?"right-start":"left-start",el="top",il="bottom",nl={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},sl={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ct extends dt{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=_.next(this._element,Fe)[0]||_.prev(this._element,Fe)[0]||_.findOne(Fe,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return nl}static get DefaultType(){return sl}static get NAME(){return An}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xt(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!d.trigger(this._element,Ra,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Ua))for(const i of[].concat(...document.body.children))d.on(i,"mouseover",Ue);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xt),this._element.classList.add(Xt),d.trigger(this._element,ja,t)}}hide(){if(xt(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!d.trigger(this._element,Ma,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))d.off(i,"mouseover",Ue);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xt),this._element.classList.remove(Xt),this._element.setAttribute("aria-expanded","false"),vt.removeDataAttribute(this._menu,"popper"),d.trigger(this._element,Pa,t),this._element.focus()}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!gt(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${An.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof bs>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:gt(this._config.reference)?t=At(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=qi(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Xt)}_getPlacement(){const t=this._parent;if(t.classList.contains(Va))return Za;if(t.classList.contains(Ha))return tl;if(t.classList.contains(Fa))return el;if(t.classList.contains(Wa))return il;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(za)?e?Xa:Ga:e?Ja:Qa}_detectNavbar(){return this._element.closest(Ya)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(vt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Y(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){const i=_.find(qa,this._menu).filter(s=>le(s));i.length&&Gi(i,e,t===Cn,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ct.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===ka||t.type==="keyup"&&t.key!==xn)return;const e=_.find(Ka);for(const i of e){const s=ct.getInstance(i);if(!s||s._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===xn||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i=t.key===$a,s=[Ia,Cn].includes(t.key);if(!s&&!i||e&&!i)return;t.preventDefault();const r=this.matches(Rt)?this:_.prev(this,Rt)[0]||_.next(this,Rt)[0]||_.findOne(Rt,t.delegateTarget.parentNode),o=ct.getOrCreateInstance(r);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}d.on(document,js,Rt,ct.dataApiKeydownHandler);d.on(document,js,Fe,ct.dataApiKeydownHandler);d.on(document,Rs,ct.clearMenus);d.on(document,Ba,ct.clearMenus);d.on(document,Rs,Rt,function(n){n.preventDefault(),ct.getOrCreateInstance(this).toggle()});st(ct);const Bs="backdrop",rl="fade",On="show",Sn=`mousedown.bs.${Bs}`,ol={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},al={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class zs extends xe{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ol}static get DefaultType(){return al}static get NAME(){return Bs}show(t){if(!this._config.isVisible){Y(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Ae(e),e.classList.add(On),this._emulateAnimation(()=>{Y(t)})}hide(t){if(!this._config.isVisible){Y(t);return}this._getElement().classList.remove(On),this._emulateAnimation(()=>{this.dispose(),Y(t)})}dispose(){this._isAppended&&(d.off(this._element,Sn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(rl),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=At(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),d.on(t,Sn,()=>{Y(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){xs(t,this._getElement(),this._config.isAnimated)}}const ll="focustrap",cl="bs.focustrap",Ge=`.${cl}`,hl=`focusin${Ge}`,dl=`keydown.tab${Ge}`,ul="Tab",_l="forward",Nn="backward",fl={autofocus:!0,trapElement:null},pl={autofocus:"boolean",trapElement:"element"};class Vs extends xe{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return fl}static get DefaultType(){return pl}static get NAME(){return ll}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),d.off(document,Ge),d.on(document,hl,t=>this._handleFocusin(t)),d.on(document,dl,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,d.off(document,Ge))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=_.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===Nn?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===ul&&(this._lastTabNavDirection=t.shiftKey?Nn:_l)}}const Ln=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Dn=".sticky-top",Pe="padding-right",$n="margin-right";class ki{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Pe,e=>e+t),this._setElementAttributes(Ln,Pe,e=>e+t),this._setElementAttributes(Dn,$n,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Pe),this._resetElementAttributes(Ln,Pe),this._resetElementAttributes(Dn,$n)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&vt.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){const i=s=>{const r=vt.getDataAttribute(s,e);if(r===null){s.style.removeProperty(e);return}vt.removeDataAttribute(s,e),s.style.setProperty(e,r)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(gt(t)){e(t);return}for(const i of _.find(t,this._element))e(i)}}const gl="modal",vl="bs.modal",nt=`.${vl}`,ml=".data-api",wl="Escape",bl=`hide${nt}`,yl=`hidePrevented${nt}`,Hs=`hidden${nt}`,Fs=`show${nt}`,El=`shown${nt}`,Tl=`resize${nt}`,Al=`click.dismiss${nt}`,xl=`mousedown.dismiss${nt}`,Cl=`keydown.dismiss${nt}`,Ol=`click${nt}${ml}`,In="modal-open",Sl="fade",kn="show",wi="modal-static",Nl=".modal.show",Ll=".modal-dialog",Dl=".modal-body",$l='[data-bs-toggle="modal"]',Il={backdrop:!0,focus:!0,keyboard:!0},kl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ht extends dt{constructor(t,e){super(t,e),this._dialog=_.findOne(Ll,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ki,this._addEventListeners()}static get Default(){return Il}static get DefaultType(){return kl}static get NAME(){return gl}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||d.trigger(this._element,Fs,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(In),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||d.trigger(this._element,bl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(kn),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){d.off(window,nt),d.off(this._dialog,nt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zs({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Vs({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=_.findOne(Dl,this._dialog);e&&(e.scrollTop=0),Ae(this._element),this._element.classList.add(kn);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,d.trigger(this._element,El,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){d.on(this._element,Cl,t=>{if(t.key===wl){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),d.on(window,Tl,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),d.on(this._element,xl,t=>{d.one(this._element,Al,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(In),this._resetAdjustments(),this._scrollBar.reset(),d.trigger(this._element,Hs)})}_isAnimated(){return this._element.classList.contains(Sl)}_triggerBackdropTransition(){if(d.trigger(this._element,yl).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(wi)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(wi),this._queueCallback(()=>{this._element.classList.remove(wi),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const s=it()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!i&&t){const s=it()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const i=Ht.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](e)}})}}d.on(document,Ol,$l,function(n){const t=_.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),d.one(t,Fs,s=>{s.defaultPrevented||d.one(t,Hs,()=>{le(this)&&this.focus()})});const e=_.findOne(Nl);e&&Ht.getInstance(e).hide(),Ht.getOrCreateInstance(t).toggle(this)});ei(Ht);st(Ht);const Ml="offcanvas",Pl="bs.offcanvas",wt=`.${Pl}`,Ws=".data-api",Rl=`load${wt}${Ws}`,jl="Escape",Mn="show",Pn="showing",Rn="hiding",Bl="offcanvas-backdrop",Ks=".offcanvas.show",zl=`show${wt}`,Vl=`shown${wt}`,Hl=`hide${wt}`,jn=`hidePrevented${wt}`,Ys=`hidden${wt}`,Fl=`resize${wt}`,Wl=`click${wt}${Ws}`,Kl=`keydown.dismiss${wt}`,Yl='[data-bs-toggle="offcanvas"]',Ul={backdrop:!0,keyboard:!0,scroll:!1},ql={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ct extends dt{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ul}static get DefaultType(){return ql}static get NAME(){return Ml}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||d.trigger(this._element,zl,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ki().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Pn);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Mn),this._element.classList.remove(Pn),d.trigger(this._element,Vl,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||d.trigger(this._element,Hl).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rn),this._backdrop.hide();const e=()=>{this._element.classList.remove(Mn,Rn),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ki().reset(),d.trigger(this._element,Ys)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){d.trigger(this._element,jn);return}this.hide()},e=!!this._config.backdrop;return new zs({className:Bl,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Vs({trapElement:this._element})}_addEventListeners(){d.on(this._element,Kl,t=>{if(t.key===jl){if(this._config.keyboard){this.hide();return}d.trigger(this._element,jn)}})}static jQueryInterface(t){return this.each(function(){const e=Ct.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}d.on(document,Wl,Yl,function(n){const t=_.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),xt(this))return;d.one(t,Ys,()=>{le(this)&&this.focus()});const e=_.findOne(Ks);e&&e!==t&&Ct.getInstance(e).hide(),Ct.getOrCreateInstance(t).toggle(this)});d.on(window,Rl,()=>{for(const n of _.find(Ks))Ct.getOrCreateInstance(n).show()});d.on(window,Fl,()=>{for(const n of _.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Ct.getOrCreateInstance(n).hide()});ei(Ct);st(Ct);const Gl=/^aria-[\w-]*$/i,Us={"*":["class","dir","id","lang","role",Gl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xl=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ql=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Jl=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?Xl.has(e)?!!Ql.test(n.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))};function Zl(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const s=new window.DOMParser().parseFromString(n,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),h=[].concat(t["*"]||[],t[a]||[]);for(const c of l)Jl(c,h)||o.removeAttribute(c.nodeName)}return s.body.innerHTML}const tc="TemplateFactory",ec={allowList:Us,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ic={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},nc={entry:"(string|element|function|null)",selector:"(string|element)"};class sc extends xe{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return ec}static get DefaultType(){return ic}static get NAME(){return tc}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(t,r,s);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},nc)}_setContent(t,e,i){const s=_.findOne(i,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(gt(e)){this._putElementInTemplate(At(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Zl(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Y(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const rc="tooltip",oc=new Set(["sanitize","allowList","sanitizeFn"]),bi="fade",ac="modal",Re="show",lc=".tooltip-inner",Bn=`.${ac}`,zn="hide.bs.modal",pe="hover",yi="focus",Ei="click",cc="manual",hc="hide",dc="hidden",uc="show",_c="shown",fc="inserted",pc="click",gc="focusin",vc="focusout",mc="mouseenter",wc="mouseleave",bc={AUTO:"auto",TOP:"top",RIGHT:it()?"left":"right",BOTTOM:"bottom",LEFT:it()?"right":"left"},yc={allowList:Us,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ec={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class he extends dt{constructor(t,e){if(typeof bs>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return yc}static get DefaultType(){return Ec}static get NAME(){return rc}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),d.off(this._element.closest(Bn),zn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=d.trigger(this._element,this.constructor.eventName(uc)),i=(Ts(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),d.trigger(this._element,this.constructor.eventName(fc))),this._popper=this._createPopper(s),s.classList.add(Re),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))d.on(a,"mouseover",Ue);const o=()=>{d.trigger(this._element,this.constructor.eventName(_c)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||d.trigger(this._element,this.constructor.eventName(hc)).defaultPrevented)return;if(this._getTipElement().classList.remove(Re),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))d.off(s,"mouseover",Ue);this._activeTrigger[Ei]=!1,this._activeTrigger[yi]=!1,this._activeTrigger[pe]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),d.trigger(this._element,this.constructor.eventName(dc)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(bi,Re),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=lo(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(bi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new sc({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[lc]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(bi)}_isShown(){return this.tip&&this.tip.classList.contains(Re)}_createPopper(t){const e=Y(this._config.placement,[this,t,this._element]),i=bc[e.toUpperCase()];return qi(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Y(t,[this._element,this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...e,...Y(this._config.popperConfig,[void 0,e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")d.on(this._element,this.constructor.eventName(pc),this._config.selector,i=>{const s=this._initializeOnDelegatedTarget(i);s._activeTrigger[Ei]=!(s._isShown()&&s._activeTrigger[Ei]),s.toggle()});else if(e!==cc){const i=e===pe?this.constructor.eventName(mc):this.constructor.eventName(gc),s=e===pe?this.constructor.eventName(wc):this.constructor.eventName(vc);d.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?yi:pe]=!0,o._enter()}),d.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?yi:pe]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},d.on(this._element.closest(Bn),zn,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=vt.getDataAttributes(this._element);for(const i of Object.keys(e))oc.has(i)&&delete e[i];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:At(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=he.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}st(he);const Tc="popover",Ac=".popover-header",xc=".popover-body",Cc={...he.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Oc={...he.DefaultType,content:"(null|string|element|function)"};class si extends he{static get Default(){return Cc}static get DefaultType(){return Oc}static get NAME(){return Tc}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ac]:this._getTitle(),[xc]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=si.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}st(si);const Sc="scrollspy",Nc="bs.scrollspy",Ji=`.${Nc}`,Lc=".data-api",Dc=`activate${Ji}`,Vn=`click${Ji}`,$c=`load${Ji}${Lc}`,Ic="dropdown-item",Ut="active",kc='[data-bs-spy="scroll"]',Ti="[href]",Mc=".nav, .list-group",Hn=".nav-link",Pc=".nav-item",Rc=".list-group-item",jc=`${Hn}, ${Pc} > ${Hn}, ${Rc}`,Bc=".dropdown",zc=".dropdown-toggle",Vc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Hc={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ri extends dt{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vc}static get DefaultType(){return Hc}static get NAME(){return Sc}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=At(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(d.off(this._config.target,Vn),d.on(this._config.target,Vn,Ti,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(i(o),!s)return;continue}!r&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=_.find(Ti,this._config.target);for(const e of t){if(!e.hash||xt(e))continue;const i=_.findOne(decodeURI(e.hash),this._element);le(i)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Ut),this._activateParents(t),d.trigger(this._element,Dc,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Ic)){_.findOne(zc,t.closest(Bc)).classList.add(Ut);return}for(const e of _.parents(t,Mc))for(const i of _.prev(e,jc))i.classList.add(Ut)}_clearActiveClass(t){t.classList.remove(Ut);const e=_.find(`${Ti}.${Ut}`,t);for(const i of e)i.classList.remove(Ut)}static jQueryInterface(t){return this.each(function(){const e=ri.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}d.on(window,$c,()=>{for(const n of _.find(kc))ri.getOrCreateInstance(n)});st(ri);const Fc="tab",Wc="bs.tab",Wt=`.${Wc}`,Kc=`hide${Wt}`,Yc=`hidden${Wt}`,Uc=`show${Wt}`,qc=`shown${Wt}`,Gc=`click${Wt}`,Xc=`keydown${Wt}`,Qc=`load${Wt}`,Jc="ArrowLeft",Fn="ArrowRight",Zc="ArrowUp",Wn="ArrowDown",Ai="Home",Kn="End",jt="active",Yn="fade",xi="show",th="dropdown",qs=".dropdown-toggle",eh=".dropdown-menu",Ci=`:not(${qs})`,ih='.list-group, .nav, [role="tablist"]',nh=".nav-item, .list-group-item",sh=`.nav-link${Ci}, .list-group-item${Ci}, [role="tab"]${Ci}`,Gs='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Oi=`${sh}, ${Gs}`,rh=`.${jt}[data-bs-toggle="tab"], .${jt}[data-bs-toggle="pill"], .${jt}[data-bs-toggle="list"]`;class re extends dt{constructor(t){super(t),this._parent=this._element.closest(ih),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),d.on(this._element,Xc,e=>this._keydown(e)))}static get NAME(){return Fc}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?d.trigger(e,Kc,{relatedTarget:t}):null;d.trigger(t,Uc,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(jt),this._activate(_.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(xi);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),d.trigger(t,qc,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(Yn))}_deactivate(t,e){if(!t)return;t.classList.remove(jt),t.blur(),this._deactivate(_.getElementFromSelector(t));const i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(xi);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),d.trigger(t,Yc,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(Yn))}_keydown(t){if(![Jc,Fn,Zc,Wn,Ai,Kn].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(s=>!xt(s));let i;if([Ai,Kn].includes(t.key))i=e[t.key===Ai?0:e.length-1];else{const s=[Fn,Wn].includes(t.key);i=Gi(e,t.target,s,!0)}i&&(i.focus({preventScroll:!0}),re.getOrCreateInstance(i).show())}_getChildren(){return _.find(Oi,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=_.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains(th))return;const s=(r,o)=>{const a=_.findOne(r,i);a&&a.classList.toggle(o,e)};s(qs,jt),s(eh,xi),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(jt)}_getInnerElement(t){return t.matches(Oi)?t:_.findOne(Oi,t)}_getOuterElement(t){return t.closest(nh)||t}static jQueryInterface(t){return this.each(function(){const e=re.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}d.on(document,Gc,Gs,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!xt(this)&&re.getOrCreateInstance(this).show()});d.on(window,Qc,()=>{for(const n of _.find(rh))re.getOrCreateInstance(n)});st(re);const oh="toast",ah="bs.toast",Lt=`.${ah}`,lh=`mouseover${Lt}`,ch=`mouseout${Lt}`,hh=`focusin${Lt}`,dh=`focusout${Lt}`,uh=`hide${Lt}`,_h=`hidden${Lt}`,fh=`show${Lt}`,ph=`shown${Lt}`,gh="fade",Un="hide",je="show",Be="showing",vh={animation:"boolean",autohide:"boolean",delay:"number"},mh={animation:!0,autohide:!0,delay:5e3};class oi extends dt{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return mh}static get DefaultType(){return vh}static get NAME(){return oh}show(){if(d.trigger(this._element,fh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(gh);const e=()=>{this._element.classList.remove(Be),d.trigger(this._element,ph),this._maybeScheduleHide()};this._element.classList.remove(Un),Ae(this._element),this._element.classList.add(je,Be),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||d.trigger(this._element,uh).defaultPrevented)return;const e=()=>{this._element.classList.add(Un),this._element.classList.remove(Be,je),d.trigger(this._element,_h)};this._element.classList.add(Be),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(je),super.dispose()}isShown(){return this._element.classList.contains(je)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){d.on(this._element,lh,t=>this._onInteraction(t,!0)),d.on(this._element,ch,t=>this._onInteraction(t,!1)),d.on(this._element,hh,t=>this._onInteraction(t,!0)),d.on(this._element,dh,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=oi.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}ei(oi);st(oi);/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const Xs="0.8.7",wh="hizzgdev@163.com";typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.slice(0,n.length)===n});const E={left:-1,center:0,right:1,of:function(n){if(!n||n===-1||n===0||n===1)return n;if(n==="-1"||n==="0"||n==="1")return parseInt(n);if(n.toLowerCase()==="left")return this.left;if(n.toLowerCase()==="right")return this.right;if(n.toLowerCase()==="center")return this.center}},q={show:1,resize:2,edit:3,select:4},ge={debug:1,info:2,warn:3,error:4,disable:9};var ut=function(){};let u=typeof console>"u"?{level:ut,log:ut,debug:ut,info:ut,warn:ut,error:ut}:{level:bh,log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error};function bh(n){n>ge.debug?u.debug=ut:u.debug=console.debug,n>ge.info?u.info=ut:u.info=console.info,n>ge.warn?u.warn=ut:u.warn=console.warn,n>ge.error?u.error=ut:u.error=console.error}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class yh{constructor(t){this.w=t,this.d=t.document,this.g=function(e){return this.d.getElementById(e)},this.c=function(e){return this.d.createElement(e)},this.t=function(e,i){e.hasChildNodes()?e.firstChild.nodeValue=i:e.appendChild(this.d.createTextNode(i))},this.h=function(e,i){i instanceof HTMLElement?(e.innerHTML="",e.appendChild(i)):e.innerHTML=i},this.i=function(e){return!!e&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"},this.on=function(e,i,s){e.addEventListener?e.addEventListener(i,s,!1):e.attachEvent("on"+i,s)}}}const w=new yh(window);/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const ht={file:{read:function(n,t){var e=new FileReader;e.onload=function(){typeof t=="function"&&t(this.result,n.name)},e.readAsText(n)},save:function(n,t,e){var i;if(typeof w.w.Blob=="function")i=new Blob([n],{type:t});else{var s=w.w.BlobBuilder||w.w.MozBlobBuilder||w.w.WebKitBlobBuilder||w.w.MSBlobBuilder,r=new s;r.append(n),i=r.getBlob(t)}if(navigator.msSaveBlob)navigator.msSaveBlob(i,e);else{var o=w.w.URL||w.w.webkitURL,a=o.createObjectURL(i),l=w.c("a");if("download"in l){l.style.visibility="hidden",l.href=a,l.download=e,w.d.body.appendChild(l);var h=w.d.createEvent("MouseEvents");h.initEvent("click",!0,!0),l.dispatchEvent(h),w.d.body.removeChild(l)}else location.href=a}}},json:{json2string:function(n){return JSON.stringify(n)},string2json:function(n){return JSON.parse(n)},merge:function(n,t){for(var e in t)e in n&&typeof n[e]=="object"&&Object.prototype.toString.call(n[e]).toLowerCase()=="[object object]"&&!n[e].length?ht.json.merge(n[e],t[e]):n[e]=t[e];return n}},uuid:{newid:function(){return(new Date().getTime().toString(16)+Math.random().toString(16).substring(2)).substring(2,18)}},text:{is_empty:function(n){return n?n.replace(/\s*/,"").length==0:!0}}};/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const Eh={container:"",editable:!1,theme:null,mode:"full",support_html:!0,log_level:"info",view:{engine:"canvas",enable_device_pixel_ratio:!1,hmargin:100,vmargin:50,line_width:2,line_color:"#555",line_style:"curved",draggable:!1,hide_scrollbars_when_draggable:!1,node_overflow:"hidden",zoom:{min:.5,max:2.1,step:.1,mask_key:4096},custom_node_render:null,expander_style:"char"},layout:{hspace:30,vspace:20,pspace:13,cousin_space:0},default_event_handle:{enable_mousedown_handle:!0,enable_click_handle:!0,enable_dblclick_handle:!0,enable_mousewheel_handle:!0},shortcut:{enable:!0,handles:{},mapping:{addchild:[45,4109],addbrother:13,editnode:113,delnode:46,toggle:32,left:37,up:38,right:39,down:40}},plugin:{}};function Th(n){var t={};if(ht.json.merge(t,Eh),ht.json.merge(t,n),!t.container)throw new Error("the options.container should not be null or empty.");return t}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */let L=class Qs{constructor(t,e,i,s,r,o,a,l){if(!t){u.error("invalid node id");return}if(typeof e!="number"){u.error("invalid node index");return}typeof l>"u"&&(l=!0),this.id=t,this.index=e,this.topic=i,this.data=s||{},this.isroot=r,this.parent=o,this.direction=a,this.expanded=!!l,this.children=[],this._data={}}get_location(){var t=this._data.view;return{x:t.abs_x,y:t.abs_y}}get_size(){var t=this._data.view;return{w:t.width,h:t.height}}static compare(t,e){var i=0,s=t.index,r=e.index;return s>=0&&r>=0?i=s-r:s==-1&&r==-1?i=0:s==-1?i=1:r==-1?i=-1:i=0,i}static inherited(t,e){if(t&&e){if(t.id===e.id||t.isroot)return!0;for(var i=t.id,s=e;!s.isroot;)if(s=s.parent,s.id===i)return!0}return!1}static is_node(t){return!!t&&t instanceof Qs}};/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class ve{constructor(){this.name=null,this.author=null,this.version=null,this.root=null,this.selected=null,this.nodes={}}get_node(t){return t in this.nodes?this.nodes[t]:(u.warn("the node[id="+t+"] can not be found"),null)}set_root(t,e,i){return this.root==null?(this.root=new L(t,0,e,i,!0),this._put_node(this.root),this.root):(u.error("root node is already exist"),null)}add_node(t,e,i,s,r,o,a){if(!L.is_node(t))return u.error("the parent_node "+t+" is not a node."),null;var l=a||-1,h=new L(e,l,i,s,!1,t,t.direction,o);return t.isroot&&(h.direction=r||E.right),this._put_node(h)?(t.children.push(h),this._update_index(t)):(u.error("fail, the node id '"+h.id+"' has been already exist."),h=null),h}insert_node_before(t,e,i,s,r){if(!L.is_node(t))return u.error("the node_before "+t+" is not a node."),null;var o=t.index-.5;return this.add_node(t.parent,e,i,s,r,!0,o)}get_node_before(t){if(!L.is_node(t)){var e=this.get_node(t);return e?this.get_node_before(e):(u.error("the node[id="+t+"] can not be found."),null)}if(t.isroot)return null;var i=t.index-2;return i>=0?t.parent.children[i]:null}insert_node_after(t,e,i,s,r){if(!L.is_node(t))return u.error("the node_after "+t+" is not a node."),null;var o=t.index+.5;return this.add_node(t.parent,e,i,s,r,!0,o)}get_node_after(t){if(!L.is_node(t)){var e=this.get_node(t);return e?this.get_node_after(e):(u.error("the node[id="+t+"] can not be found."),null)}if(t.isroot)return null;var i=t.index,s=t.parent.children;return s.length>i?t.parent.children[i]:null}move_node(t,e,i,s){return L.is_node(t)?(i||(i=t.parent.id),this._move_node(t,e,i,s)):(u.error("the parameter node "+t+" is not a node."),null)}_flow_node_direction(t,e){typeof e>"u"?e=t.direction:t.direction=e;for(var i=t.children.length;i--;)this._flow_node_direction(t.children[i],e)}_move_node_internal(t,e){if(t&&e)if(e=="_last_")t.index=-1,this._update_index(t.parent);else if(e=="_first_")t.index=0,this._update_index(t.parent);else{var i=e?this.get_node(e):null;i!=null&&i.parent!=null&&i.parent.id==t.parent.id&&(t.index=i.index-.5,this._update_index(t.parent))}return t}_move_node(t,e,i,s){if(t&&i){var r=this.get_node(i);if(L.inherited(t,r))return u.error("can not move a node to its children"),null;if(t.parent.id!=i){for(var o=t.parent.children,a=o.length;a--;)if(o[a].id==t.id){o.splice(a,1);break}let l=t.parent;t.parent=r,r.children.push(t),this._update_index(l)}t.parent.isroot?s==E.left?t.direction=s:t.direction=E.right:t.direction=t.parent.direction,this._move_node_internal(t,e),this._flow_node_direction(t)}return t}remove_node(t){if(!L.is_node(t))return u.error("the parameter node "+t+" is not a node."),!1;if(t.isroot)return u.error("fail, can not remove root node"),!1;this.selected!=null&&this.selected.id==t.id&&(this.selected=null);for(var e=t.children,i=e.length;i--;)this.remove_node(e[i]);e.length=0;for(var s=t.parent,r=s.children,o=r.length;o--;)if(r[o].id==t.id){r.splice(o,1);break}delete this.nodes[t.id];for(var a in t)delete t[a];return t=null,this._update_index(s),!0}_put_node(t){return t.id in this.nodes?(u.warn("the node_id '"+t.id+"' has been already exist."),!1):(this.nodes[t.id]=t,!0)}_update_index(t){if(t instanceof L){t.children.sort(L.compare);for(var e=0;e<t.children.length;e++)t.children[e].index=e+1}}}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const ze={name:"jsMind",author:wh,version:Xs},S={node_tree:{example:{meta:ze,format:"node_tree",data:{id:"root",topic:"jsMind node_tree example"}},get_mind:function(n){var t=S.node_tree,e=new ve;return e.name=n.meta.name,e.author=n.meta.author,e.version=n.meta.version,t._parse(e,n.data),e},get_data:function(n){var t=S.node_tree,e={};return e.meta={name:n.name,author:n.author,version:n.version},e.format="node_tree",e.data=t._build_node(n.root),e},_parse:function(n,t){var e=S.node_tree,i=e._extract_data(t);if(n.set_root(t.id,t.topic,i),"children"in t)for(var s=t.children,r=0;r<s.length;r++)e._extract_subnode(n,n.root,s[r])},_extract_data:function(n){var t={};for(var e in n)e=="id"||e=="topic"||e=="children"||e=="direction"||e=="expanded"||(t[e]=n[e]);return t},_extract_subnode:function(n,t,e){var i=S.node_tree,s=i._extract_data(e),r=null;t.isroot&&(r=e.direction=="left"?E.left:E.right);var o=n.add_node(t,e.id,e.topic,s,r,e.expanded);if(e.children)for(var a=e.children,l=0;l<a.length;l++)i._extract_subnode(n,o,a[l])},_build_node:function(n){var t=S.node_tree;if(n instanceof L){var e={id:n.id,topic:n.topic,expanded:n.expanded};if(n.parent&&n.parent.isroot&&(e.direction=n.direction==E.left?"left":"right"),n.data!=null){var i=n.data;for(var s in i)e[s]=i[s]}var r=n.children;if(r.length>0){e.children=[];for(var o=0;o<r.length;o++)e.children.push(t._build_node(r[o]))}return e}}},node_array:{example:{meta:ze,format:"node_array",data:[{id:"root",topic:"jsMind node_array example",isroot:!0}]},get_mind:function(n){var t=S.node_array,e=new ve;return e.name=n.meta.name,e.author=n.meta.author,e.version=n.meta.version,t._parse(e,n.data),e},get_data:function(n){var t=S.node_array,e={};return e.meta={name:n.name,author:n.author,version:n.version},e.format="node_array",e.data=[],t._array(n,e.data),e},_parse:function(n,t){var e=S.node_array,i=t.slice(0);i.reverse();var s=e._extract_root(n,i);s?e._extract_subnode(n,s,i):u.error("root node can not be found")},_extract_root:function(n,t){for(var e=S.node_array,i=t.length;i--;)if("isroot"in t[i]&&t[i].isroot){var s=t[i],r=e._extract_data(s),o=n.set_root(s.id,s.topic,r);return t.splice(i,1),o}return null},_extract_subnode:function(n,t,e){for(var i=S.node_array,s=e.length,r=null,o=null,a=0;s--;)if(r=e[s],r.parentid==t.id){o=i._extract_data(r);var l=null,h=r.direction;h&&(l=h=="left"?E.left:E.right);var c=n.add_node(t,r.id,r.topic,o,l,r.expanded);e.splice(s,1),a++;var f=i._extract_subnode(n,c,e);f>0&&(s=e.length,a+=f)}return a},_extract_data:function(n){var t={};for(var e in n)e=="id"||e=="topic"||e=="parentid"||e=="isroot"||e=="direction"||e=="expanded"||(t[e]=n[e]);return t},_array:function(n,t){var e=S.node_array;e._array_node(n.root,t)},_array_node:function(n,t){var e=S.node_array;if(n instanceof L){var i={id:n.id,topic:n.topic,expanded:n.expanded};if(n.parent&&(i.parentid=n.parent.id),n.isroot&&(i.isroot=!0),n.parent&&n.parent.isroot&&(i.direction=n.direction==E.left?"left":"right"),n.data!=null){var s=n.data;for(var r in s)i[r]=s[r]}t.push(i);for(var o=n.children.length,a=0;a<o;a++)e._array_node(n.children[a],t)}}},freemind:{example:{meta:ze,format:"freemind",data:'<map version="1.0.1"><node ID="root" TEXT="jsMind freemind example"/></map>'},get_mind:function(n){var t=S.freemind,e=new ve;e.name=n.meta.name,e.author=n.meta.author,e.version=n.meta.version;var i=n.data,s=t._parse_xml(i),r=t._find_root(s);return t._load_node(e,null,r),e},get_data:function(n){var t=S.freemind,e={};e.meta={name:n.name,author:n.author,version:n.version},e.format="freemind";var i=[];return i.push('<map version="1.0.1">'),t._build_map(n.root,i),i.push("</map>"),e.data=i.join(""),e},_parse_xml:function(n){var t=null;if(window.DOMParser){var e=new DOMParser;t=e.parseFromString(n,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n);return t},_find_root:function(n){for(var t=n.childNodes,e=null,i=null,s=0;s<t.length;s++)if(i=t[s],i.nodeType==1&&i.tagName=="map"){e=i;break}if(e){var r=e.childNodes;e=null;for(var s=0;s<r.length;s++)if(i=r[s],i.nodeType==1&&i.tagName=="node"){e=i;break}}return e},_load_node:function(n,t,e){var i=S.freemind,s=e.getAttribute("ID"),r=e.getAttribute("TEXT"),o=e.getAttribute("FOLDED");if(r==null){for(var a=e.childNodes,l=null,h=0;h<a.length;h++)if(l=a[h],l.nodeType==1&&l.tagName==="richcontent"){r=l.textContent;break}}var c=i._load_attributes(e),f="expanded"in c?c.expanded=="true":o!="true";delete c.expanded;var g=e.getAttribute("COLOR");g&&(c["foreground-color"]=g);var p=e.getAttribute("BACKGROUND_COLOR");p&&(c["background-color"]=p);var T=e.getAttribute("POSITION"),v=null;T&&(v=T=="left"?E.left:E.right);var b=null;t?b=n.add_node(t,s,r,c,v,f):b=n.set_root(s,r,c);for(var A=e.childNodes,N=null,h=0;h<A.length;h++)N=A[h],N.nodeType==1&&N.tagName=="node"&&i._load_node(n,b,N)},_load_attributes:function(n){for(var t=n.childNodes,e=null,i={},s=0;s<t.length;s++)e=t[s],e.nodeType==1&&e.tagName==="attribute"&&(i[e.getAttribute("NAME")]=e.getAttribute("VALUE"));return i},_build_map:function(n,t){var e=S.freemind,i=null,s=n.data;if(n.parent&&n.parent.isroot&&(i=n.direction===E.left?"left":"right"),t.push("<node"),t.push(' ID="'+n.id+'"'),i&&t.push(' POSITION="'+i+'"'),n.expanded||t.push(' FOLDED="true"'),s["foreground-color"]&&t.push(' COLOR="'+s["foreground-color"]+'"'),s["background-color"]&&t.push(' BACKGROUND_COLOR="'+s["background-color"]+'"'),t.push(' TEXT="'+e._escape(n.topic)+'">'),s!=null)for(var r in s)r==="foreground-color"||r==="background-color"||t.push('<attribute NAME="'+r+'" VALUE="'+s[r]+'"/>');for(var o=n.children,a=0;a<o.length;a++)e._build_map(o[a],t);t.push("</node>")},_escape:function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}},text:{example:{meta:ze,format:"text",data:`jsMind text example
 node1
  node1-sub
  node1-sub
 node2`},_line_regex:/\s*/,get_mind:function(n){var t=S.text,e=new ve;e.name=n.meta.name,e.author=n.meta.author,e.version=n.meta.version;var i=n.data.split(/\n|\r/);return t._fill_nodes(e,i,0,0),e},_fill_nodes:function(n,t){let e=[],i=0;for(;i<t.length;){let s=t[i],r=s.match(/\s*/)[0].length,o=s.substr(r);if(r==0&&e.length>0){log.error("more than 1 root node was found: "+o);return}if(r>e.length){log.error("a suspended node was found: "+o);return}let a=e.length-r;for(;a--;)e.pop();if(r==0&&e.length==0){let l=n.set_root(ht.uuid.newid(),o);e.push(l)}else{let l=n.add_node(e[r-1],ht.uuid.newid(),o,{},null);e.push(l)}i++}e.length=0},get_data:function(n){var t=S.text,e={};e.meta={name:n.name,author:n.author,version:n.version},e.format="text";let i=[];return t._build_lines(i,[n.root],0),e.data=i.join(`
`),e},_build_lines:function(n,t,e){let i=new Array(e+1).join(" ");for(let s of t)n.push(i+s.topic),s.children&&S.text._build_lines(n,s.children,e+1)}}};/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class Ah{constructor(t){this.jm=t}init(){u.debug("data.init")}reset(){u.debug("data.reset")}load(t){var e=null,i=null;return typeof t=="object"?t.format?e=t.format:e="node_tree":e="freemind",e=="node_array"?i=S.node_array.get_mind(t):e=="node_tree"?i=S.node_tree.get_mind(t):e=="freemind"?i=S.freemind.get_mind(t):e=="text"?i=S.text.get_mind(t):u.warn("unsupported format"),i}get_data(t){var e=null;return t=="node_array"?e=S.node_array.get_data(this.jm.mind):t=="node_tree"?e=S.node_tree.get_data(this.jm.mind):t=="freemind"?e=S.freemind.get_data(this.jm.mind):t=="text"?e=S.text.get_data(this.jm.mind):u.error("unsupported "+t+" format"),e}}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class xh{constructor(t,e){this.opts=e,this.jm=t,this.isside=this.opts.mode=="side",this.bounds=null,this.cache_valid=!1}init(){u.debug("layout.init")}reset(){u.debug("layout.reset"),this.bounds={n:0,s:0,w:0,e:0}}calculate_next_child_direction(t){if(this.isside)return E.right;for(var e=t.children||[],i=e.length,s=0,r=0;r<i;r++)e[r].direction===E.left?s--:s++;return i>1&&s>0?E.left:E.right}layout(){u.debug("layout.layout"),this.layout_direction(),this.layout_offset()}layout_direction(){this._layout_direction_root()}_layout_direction_root(){var t=this.jm.mind.root,e=null;"layout"in t._data?e=t._data.layout:(e={},t._data.layout=e);var i=t.children,s=i.length;if(e.direction=E.center,e.side_index=0,this.isside)for(var r=s;r--;)this._layout_direction_side(i[r],E.right,r);else for(var r=s,o=null;r--;)o=i[r],o.direction==E.left?this._layout_direction_side(o,E.left,r):this._layout_direction_side(o,E.right,r)}_layout_direction_side(t,e,i){var s=null;"layout"in t._data?s=t._data.layout:(s={},t._data.layout=s);var r=t.children,o=r.length;s.direction=e,s.side_index=i;for(var a=o;a--;)this._layout_direction_side(r[a],e,a)}layout_offset(){var t=this.jm.mind.root,e=t._data.layout;e.offset_x=0,e.offset_y=0,e.outer_height=0;for(var i=t.children,s=i.length,r=[],o=[],a=null;s--;)a=i[s],a._data.layout.direction==E.right?o.unshift(a):r.unshift(a);e.left_nodes=r,e.right_nodes=o,e.outer_height_left=this._layout_offset_subnodes(r),e.outer_height_right=this._layout_offset_subnodes(o),this.bounds.e=t._data.view.width/2,this.bounds.w=0-this.bounds.e,this.bounds.n=0,this.bounds.s=Math.max(e.outer_height_left,e.outer_height_right)}_layout_offset_subnodes(t){for(var e=0,i=t.length,s=i,r=null,o=0,a=null,l=0,h=null;s--;)r=t[s],a=r._data.layout,h==null&&(h=r.parent._data),o=this._layout_offset_subnodes(r.children),r.expanded||(o=0,this.set_visible(r.children,!1)),o=Math.max(r._data.view.height,o),this._should_reserve_cousin_space(r)&&(o+=this.opts.cousin_space),a.outer_height=o,a.offset_y=l-o/2,a.offset_x=this.opts.hspace*a.direction+h.view.width*(h.layout.direction+a.direction)/2,r.parent.isroot||(a.offset_x+=this.opts.pspace*a.direction),l=l-o-this.opts.vspace,e+=o;i>1&&(e+=this.opts.vspace*(i-1)),s=i;for(var c=e/2;s--;)r=t[s],r._data.layout.offset_y+=c;return e}_layout_offset_subnodes_height(t){for(var e=0,i=t.length,s=i,r=null,o=0,a=null,l=0,h=null;s--;)r=t[s],a=r._data.layout,h==null&&(h=r.parent._data),o=this._layout_offset_subnodes_height(r.children),r.expanded||(o=0),o=Math.max(r._data.view.height,o),this._should_reserve_cousin_space(r)&&(o+=this.opts.cousin_space),a.outer_height=o,a.offset_y=l-o/2,l=l-o-this.opts.vspace,e+=o;i>1&&(e+=this.opts.vspace*(i-1)),s=i;for(var c=e/2;s--;)r=t[s],r._data.layout.offset_y+=c;return e}_should_reserve_cousin_space(t){return t.children.length>0&&t.parent.children.length>1}get_node_offset(t){var e=t._data.layout,i=null;if("_offset_"in e&&this.cache_valid?i=e._offset_:(i={x:-1,y:-1},e._offset_=i),i.x==-1||i.y==-1){var s=e.offset_x,r=e.offset_y;if(!t.isroot){var o=this.get_node_offset(t.parent);s+=o.x,r+=o.y}i.x=s,i.y=r}return i}get_node_point(t){var e=t._data.view,i=this.get_node_offset(t),s={};return s.x=i.x+e.width*(t._data.layout.direction-1)/2,s.y=i.y-e.height/2,s}get_node_point_in(t){var e=this.get_node_offset(t);return e}get_node_point_out(t){var e=t._data.layout,i=null;if("_pout_"in e&&this.cache_valid?i=e._pout_:(i={x:-1,y:-1},e._pout_=i),i.x==-1||i.y==-1)if(t.isroot)i.x=0,i.y=0;else{var s=t._data.view,r=this.get_node_offset(t);i.x=r.x+(s.width+this.opts.pspace)*t._data.layout.direction,i.y=r.y}return i}get_expander_point(t){var e=this.get_node_point_out(t),i={};return t._data.layout.direction==E.right?i.x=e.x-this.opts.pspace:i.x=e.x,i.y=e.y-Math.ceil(this.opts.pspace/2),i}get_min_size(){var t=this.jm.mind.nodes,e=null,i=null;for(var s in t)e=t[s],i=this.get_node_point_out(e),i.x>this.bounds.e&&(this.bounds.e=i.x),i.x<this.bounds.w&&(this.bounds.w=i.x);return{w:this.bounds.e-this.bounds.w,h:this.bounds.s-this.bounds.n}}toggle_node(t){t.isroot||(t.expanded?this.collapse_node(t):this.expand_node(t))}expand_node(t){t.expanded=!0,this.part_layout(t),this.set_visible(t.children,!0),this.jm.invoke_event_handle(q.show,{evt:"expand_node",data:[],node:t.id})}collapse_node(t){t.expanded=!1,this.part_layout(t),this.set_visible(t.children,!1),this.jm.invoke_event_handle(q.show,{evt:"collapse_node",data:[],node:t.id})}expand_all(){var t=this.jm.mind.nodes,e=0,i;for(var s in t)i=t[s],i.expanded||(i.expanded=!0,e++);if(e>0){var r=this.jm.mind.root;this.part_layout(r),this.set_visible(r.children,!0)}}collapse_all(){var t=this.jm.mind.nodes,e=0,i;for(var s in t)i=t[s],i.expanded&&!i.isroot&&(i.expanded=!1,e++);if(e>0){var r=this.jm.mind.root;this.part_layout(r),this.set_visible(r.children,!0)}}expand_to_depth(t,e,i){if(!(t<1))for(var s=e||this.jm.mind.root.children,r=i||1,o=s.length,a=null;o--;)a=s[o],r<t&&(a.expanded||this.expand_node(a),this.expand_to_depth(t,a.children,r+1)),r==t&&a.expanded&&this.collapse_node(a)}part_layout(t){var e=this.jm.mind.root;if(e){var i=e._data.layout;t.isroot?(i.outer_height_right=this._layout_offset_subnodes_height(i.right_nodes),i.outer_height_left=this._layout_offset_subnodes_height(i.left_nodes)):t._data.layout.direction==E.right?i.outer_height_right=this._layout_offset_subnodes_height(i.right_nodes):i.outer_height_left=this._layout_offset_subnodes_height(i.left_nodes),this.bounds.s=Math.max(i.outer_height_left,i.outer_height_right),this.cache_valid=!1}else u.warn("can not found root node")}set_visible(t,e){for(var i=t.length,s=null;i--;)s=t[i],s._data.layout,s.expanded?this.set_visible(s.children,e):this.set_visible(s.children,!1),s.isroot||(s._data.layout.visible=e)}is_expand(t){return t.expanded}is_visible(t){var e=t._data.layout;return!("visible"in e&&!e.visible)}}class Ch{constructor(){J(this,"TYPE_ICONS",{Text:"",BibEntry:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 896' fill='%23000000' x='0' y='0' width='1024' height='896'%3E%3Cpath fill='%23000000' d='M960 320H64q-27 0-45.5-18.5T0 256.5T18.5 211T64 192h896q26 0 45 19t19 45.5t-19 45t-45 18.5zM832 128H192q-27 0-45.5-18.5t-18.5-45T146.5 19T192 0h640q26 0 45 19t19 45.5t-19 45t-45 18.5zM128 512q-27 0-45.5-18.5t-18.5-45T82.5 403t45.5-19h768q26 0 45 19t19 45.5t-19 45t-45 18.5H128zm-64 64h896q26 0 45 19t19 45.5t-19 45t-45 18.5H64q-27 0-45.5-18.5T0 640t18.5-45.5T64 576zm256 192h384q26 0 45 19t19 45.5t-19 45t-45 18.5H320q-27 0-45.5-18.5T256 832t18.5-45.5T320 768z'/%3E%3C/svg%3E",PDFFile:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' fill='%23ca0202' x='0' y='0' width='512' height='512'%3E%3Cpath fill='%23ca0202' d='M0 64C0 28.7 28.7 0 64 0h160v128c0 17.7 14.3 32 32 32h128v144H176c-35.3 0-64 28.7-64 64v144H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0l128 128zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56h-16v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-16v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48h-32c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16h-16v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16h-32v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V368z'/%3E%3C/svg%3E",PDFComment:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 24 24'%3E%3Crect x='0' y='0' width='24' height='24' rx='8' fill='none'/%3E%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23c01111' x='0' y='0' width='24' height='24'%3E%3Cpath fill='%23c01111' d='M12 9a1 1 0 1 0 1 1a1 1 0 0 0-1-1Zm7-7H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h11.59l3.7 3.71A1 1 0 0 0 21 22a.84.84 0 0 0 .38-.08A1 1 0 0 0 22 21V5a3 3 0 0 0-3-3Zm1 16.59l-2.29-2.3A1 1 0 0 0 17 16H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1ZM8 9a1 1 0 1 0 1 1a1 1 0 0 0-1-1Zm8 0a1 1 0 1 0 1 1a1 1 0 0 0-1-1Z'/%3E%3C/svg%3E%3C/svg%3E"});J(this,"TAG_ICONS",{unchecked:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128' width='128' height='128'%3E%3Crect x='10' y='10' width='108' height='108' stroke='%23000' stroke-width='8' fill='none'/%3E%3C/svg%3E",checked:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128' width='128' height='128'%3E%3Crect x='10' y='10' width='108' height='108' stroke='%23000' stroke-width='8' fill='%2300C853'/%3E%3Cpath fill='%2300C853' d='M35 64l20 20 40-40' stroke='%23FFF' stroke-width='12' stroke-linecap='round'/%3E%3C/svg%3E",star:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128' x='0' y='0' width='128' height='128'%3E%3Cpath fill='%23FDD835' d='m68.05 7.23l13.46 30.7a7.047 7.047 0 0 0 5.82 4.19l32.79 2.94c3.71.54 5.19 5.09 2.5 7.71l-24.7 20.75c-2 1.68-2.91 4.32-2.36 6.87l7.18 33.61c.63 3.69-3.24 6.51-6.56 4.76L67.56 102a7.033 7.033 0 0 0-7.12 0l-28.62 16.75c-3.31 1.74-7.19-1.07-6.56-4.76l7.18-33.61c.54-2.55-.36-5.19-2.36-6.87L5.37 52.78c-2.68-2.61-1.2-7.17 2.5-7.71l32.79-2.94a7.047 7.047 0 0 0 5.82-4.19l13.46-30.7c1.67-3.36 6.45-3.36 8.11-.01z'/%3E%3C/svg%3E",question_mark:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 412 731' fill='%23c81e1e' x='0' y='0' width='412' height='731'%3E%3Cpath fill='%23c81e1e' d='M86 281H12c-7-23-12-46-12-71C0 84 81 0 207 0c117 0 191 64 204 178c1 8 1 17 1 26c0 53-14 98-50 135c-35 35-59 58-97 91c-41 36-41 98-41 144h-77c0-108 24-153 59-188c34-34 83-64 109-97c22-26 28-57 28-85c0-87-49-136-136-136c-88 0-138 55-138 142c0 26 6 49 17 71zm61 373h77v77h-77v-77z'/%3E%3C/svg%3E",warning:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64' width='64' height='64'%3E%3Cpolygon points='32,6 2,58 62,58' fill='%23ffdd15' stroke='%23e2b800' stroke-width='2'/%3E%3Crect x='29' y='22' width='6' height='20' rx='3' fill='%23222222'/%3E%3Ccircle cx='32' cy='50' r='3' fill='%23222222'/%3E%3C/svg%3E",light_bulb:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512' fill='%23fdee44' x='0' y='0' width='384' height='512'%3E%3Cpath fill='%23fdee44' d='M272 384c9.6-31.9 29.5-59.1 49.2-86.2c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c19.8 27.1 39.7 54.4 49.2 86.2h160zm-80 128c44.2 0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zm-80-336c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z'/%3E%3C/svg%3E",green_flag:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2310c613' x='0' y='0' width='24' height='24'%3E%3Cpath fill='%2310c613' fill-rule='evenodd' stroke='%2310c613' stroke-width='2' d='M2 24V2c8-3.524 11 4.644 20 0v12c-8 4.895-13-4.103-20 0'/%3E%3C/svg%3E",red_flag:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23c61010' x='0' y='0' width='24' height='24'%3E%3Cpath fill='%23c61010' fill-rule='evenodd' stroke='%23c61010' stroke-width='2' d='M2 24V2c8-3.524 11 4.644 20 0v12c-8 4.895-13-4.103-20 0'/%3E%3C/svg%3E"});J(this,"HIGHLIGHTS",{4:"#d4ac0d",5:"#196F3D"})}}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class Xe{constructor(t){this.view=t,this.opts=t.opts,this.e_svg=Xe.c("svg"),this.e_svg.setAttribute("class","jsmind"),this.size={w:0,h:0},this.lines=[],this.line_drawing={straight:this._line_to,curved:this._bezier_to},this.init_line_render()}static c(t){return w.d.createElementNS("http://www.w3.org/2000/svg",t)}init_line_render(){typeof this.opts.custom_line_render=="function"?this.drawing=(t,e,i,s,r)=>{try{this.opts.custom_line_render.call(this,{ctx:t,start_point:{x:e,y:i},end_point:{x:s,y:r}})}catch(o){u.error("custom line renderer error: ",o)}}:this.drawing=this.line_drawing[this.opts.line_style]||this.line_drawing.curved}element(){return this.e_svg}set_size(t,e){this.size.w=t,this.size.h=e,this.e_svg.setAttribute("width",t),this.e_svg.setAttribute("height",e)}clear(){for(var t=this.lines.length;t--;)this.e_svg.removeChild(this.lines[t]);this.lines.length=0}draw_line(t,e,i,s){var r=Xe.c("path");r.setAttribute("stroke",s||this.opts.line_color),r.setAttribute("stroke-width",this.opts.line_width),r.setAttribute("fill","transparent"),this.lines.push(r),this.e_svg.appendChild(r),this.drawing(r,e.x+i.x,e.y+i.y,t.x+i.x,t.y+i.y)}copy_to(t,e){var i=new Image;i.onload=function(){t.drawImage(i,0,0),e&&e()},i.src="data:image/svg+xml;base64,"+btoa(new XMLSerializer().serializeToString(this.e_svg))}_bezier_to(t,e,i,s,r){t.setAttribute("d","M "+e+" "+i+" C "+(e+(s-e)*2/3)+" "+i+", "+e+" "+r+", "+s+" "+r)}_line_to(t,e,i,s,r){t.setAttribute("d","M "+e+" "+i+" L "+s+" "+r)}}class Oh{constructor(t){this.opts=t.opts,this.e_canvas=w.c("canvas"),this.e_canvas.className="jsmind",this.canvas_ctx=this.e_canvas.getContext("2d"),this.size={w:0,h:0},this.line_drawing={straight:this._line_to,curved:this._bezier_to},this.dpr=t.device_pixel_ratio,this.init_line_render()}init_line_render(){typeof this.opts.custom_line_render=="function"?this.drawing=(t,e,i,s,r)=>{try{this.opts.custom_line_render.call(this,{ctx:t,start_point:{x:e,y:i},end_point:{x:s,y:r}})}catch(o){u.error("custom line render error: ",o)}}:this.drawing=this.line_drawing[this.opts.line_style]||this.line_drawing.curved}element(){return this.e_canvas}set_size(t,e){this.size.w=t,this.size.h=e,this.e_canvas.width&&this.e_canvas.height&&this.canvas_ctx.scale?(this.e_canvas.width=t*this.dpr,this.e_canvas.height=e*this.dpr,this.e_canvas.style.width=t+"px",this.e_canvas.style.height=e+"px",this.canvas_ctx.scale(this.dpr,this.dpr)):(this.e_canvas.width=t,this.e_canvas.height=e)}clear(){this.canvas_ctx.clearRect(0,0,this.size.w,this.size.h)}draw_line(t,e,i,s){var r=this.canvas_ctx;r.strokeStyle=s||this.opts.line_color,r.lineWidth=this.opts.line_width,r.lineCap="round",this.drawing(r,e.x+i.x,e.y+i.y,t.x+i.x,t.y+i.y)}copy_to(t,e){t.drawImage(this.e_canvas,0,0,this.size.w,this.size.h),e&&e()}_bezier_to(t,e,i,s,r){t.beginPath(),t.moveTo(e,i),t.bezierCurveTo(e+(s-e)*2/3,i,e,r,s,r),t.stroke()}_line_to(t,e,i,s,r){t.beginPath(),t.moveTo(e,i),t.lineTo(s,r),t.stroke()}}function Sh(n,t){return t.toLowerCase()==="svg"?new Xe(n):new Oh(n)}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com - slightly altered
 * Altered lines are marked with '// Altered lines: --- // End'
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class Nh{constructor(t,e){this.opts=e,this.jm=t,this.layout=t.layout,this.container=null,this.e_panel=null,this.e_nodes=null,this.size={w:0,h:0},this.selected_node=null,this.editing_node=null,this.graph=null,this.render_node=e.custom_node_render?this._custom_node_render:this._default_node_render,this.zoom_current=1,this.device_pixel_ratio=this.opts.enable_device_pixel_ratio&&w.w.devicePixelRatio||1,this._initialized=!1,this.resourceManager=new Ch}init(){if(u.debug(this.opts),u.debug("view.init"),this.container=w.i(this.opts.container)?this.opts.container:w.g(this.opts.container),!this.container){u.error("the options.view.container was not be found in dom");return}this.graph=Sh(this,this.opts.engine),this.e_panel=w.c("div"),this.e_nodes=w.c("jmnodes"),this.e_editor=w.c("input"),this.e_panel.className="jsmind-inner jmnode-overflow-"+this.opts.node_overflow,this.e_panel.tabIndex=1,this.e_panel.appendChild(this.graph.element()),this.e_panel.appendChild(this.e_nodes),this.e_editor.className="jsmind-editor",this.e_editor.type="text";var t=this;w.on(this.e_editor,"keydown",function(e){var i=e||event;i.keyCode==13&&(t.edit_node_end(),i.stopPropagation())}),w.on(this.e_editor,"blur",function(e){t.edit_node_end()}),this.container.appendChild(this.e_panel),this.container.offsetParent||new IntersectionObserver((e,i)=>{e[0].isIntersecting&&(i.unobserve(this.e_panel),this.resize())}).observe(this.e_panel)}add_event(t,e,i,s){let r=s?this.e_panel:this.e_nodes;w.on(r,e,function(o){var a=o||event;i.call(t,a)})}get_binded_nodeid(t){if(t==null)return null;var e=t.tagName.toLowerCase();return e=="jmnode"||e=="jmexpander"?t.getAttribute("nodeid"):e=="jmnodes"||e=="body"||e=="html"?null:this.get_binded_nodeid(t.parentElement)}is_node(t){if(t==null)return!1;var e=t.tagName.toLowerCase();return e=="jmnode"?!0:e=="jmnodes"||e=="body"||e=="html"?!1:this.is_node(t.parentElement)}is_expander(t){return t.tagName.toLowerCase()=="jmexpander"}reset(){u.debug("view.reset"),this.selected_node=null,this.clear_lines(),this.clear_nodes(),this.reset_theme()}reset_theme(){var t=this.jm.options.theme;t?this.e_nodes.className="theme-"+t:this.e_nodes.className=""}reset_custom_style(){var t=this.jm.mind.nodes;for(var e in t)this.reset_node_custom_style(t[e])}load(){u.debug("view.load"),this.setup_canvas_draggable(this.opts.draggable),this.init_nodes(),this._initialized=!0}expand_size(){var t=this.layout.get_min_size(),e=t.w+this.opts.hmargin*2,i=t.h+this.opts.vmargin*2,s=this.e_panel.clientWidth,r=this.e_panel.clientHeight;s<e&&(s=e),r<i&&(r=i),this.size.w=s,this.size.h=r}init_nodes_size(t){var e=t._data.view;e.width=e.element.clientWidth,e.height=e.element.clientHeight}init_nodes(){var t=this.jm.mind.nodes,e=w.d.createDocumentFragment();for(var i in t)this.create_node_element(t[i],e);this.e_nodes.appendChild(e),this.run_in_c11y_mode_if_needed(()=>{for(var s in t)this.init_nodes_size(t[s])})}add_node(t){this.create_node_element(t,this.e_nodes),this.run_in_c11y_mode_if_needed(()=>{this.init_nodes_size(t)})}run_in_c11y_mode_if_needed(t){if(this.container.offsetParent){t();return}u.warn("init nodes in compatibility mode. because the container or its parent has style {display:none}. "),this.e_panel.style.position="absolute",this.e_panel.style.top="-100000",w.d.body.appendChild(this.e_panel),t(),this.container.appendChild(this.e_panel),this.e_panel.style.position=null,this.e_panel.style.top=null}create_node_element(t,e){var i=null;"view"in t._data?i=t._data.view:(i={},t._data.view=i);var s=w.c("jmnode");if(t.isroot)s.className="root";else{var r=w.c("jmexpander");w.t(r,"-"),r.setAttribute("nodeid",t.id),r.style.visibility="hidden",e.appendChild(r),i.expander=r}t.topic&&this.render_node(s,t),s.setAttribute("nodeid",t.id),s.style.visibility="hidden",this._reset_node_custom_style(s,t.data),e.appendChild(s),i.element=s}remove_node(t){this.selected_node!=null&&this.selected_node.id==t.id&&(this.selected_node=null),this.editing_node!=null&&this.editing_node.id==t.id&&(t._data.view.element.removeChild(this.e_editor),this.editing_node=null);for(var e=t.children,i=e.length;i--;)this.remove_node(e[i]);if(t._data.view){var s=t._data.view.element,r=t._data.view.expander;this.e_nodes.removeChild(s),this.e_nodes.removeChild(r),t._data.view.element=null,t._data.view.expander=null}}update_node(t){var e=t._data.view,i=e.element;if(t.topic&&this.render_node(i,t),this.layout.is_visible(t))e.width=i.clientWidth,e.height=i.clientHeight;else{let s=i.getAttribute("style");i.style="visibility: visible; left:0; top:0;",e.width=i.clientWidth,e.height=i.clientHeight,i.style=s}}select_node(t){if(this.selected_node){var e=this.selected_node._data.view.element;e.className=e.className.replace(/\s*selected\b/i,""),this.restore_selected_node_custom_style(this.selected_node)}t&&(this.selected_node=t,t._data.view.element.className+=" selected",this.clear_selected_node_custom_style(t))}select_clear(){this.select_node(null)}get_editing_node(){return this.editing_node}is_editing(){return!!this.editing_node}edit_node_begin(t){if(!t.topic){u.warn("don't edit image nodes");return}this.editing_node!=null&&this.edit_node_end(),this.editing_node=t;var e=t._data.view,i=e.element,s=t.topic,r=getComputedStyle(i);this.e_editor.value=s,this.e_editor.style.width=i.clientWidth-parseInt(r.getPropertyValue("padding-left"))-parseInt(r.getPropertyValue("padding-right"))+"px",i.innerHTML="",i.appendChild(this.e_editor),i.style.zIndex=5,this.e_editor.focus(),this.e_editor.select()}edit_node_end(){if(this.editing_node!=null){var t=this.editing_node;this.editing_node=null;var e=t._data.view,i=e.element,s=this.e_editor.value;i.style.zIndex="auto",i.removeChild(this.e_editor),ht.text.is_empty(s)||t.topic===s?this.render_node(i,t):this.jm.update_node(t.id,s),this.jm.saveState()}this.e_panel.focus()}get_view_offset(){var t=this.layout.bounds,e=(this.size.w-t.e-t.w)/2,i=this.size.h/2;return{x:e,y:i}}resize(){this.graph.set_size(1,1),this.e_nodes.style.width="1px",this.e_nodes.style.height="1px",this.expand_size(),this._show()}_show(){this.graph.set_size(this.size.w,this.size.h),this.e_nodes.style.width=this.size.w+"px",this.e_nodes.style.height=this.size.h+"px",this.show_nodes(),this.show_lines(),this.jm.invoke_event_handle(q.resize,{data:[]})}zoom_in(t){return this.set_zoom(this.zoom_current+this.opts.zoom.step,t)}zoom_out(t){return this.set_zoom(this.zoom_current-this.opts.zoom.step,t)}set_zoom(t,e){if(t<this.opts.zoom.min||t>this.opts.zoom.max)return!1;let i=this.e_panel.getBoundingClientRect();if(t<1&&t<this.zoom_current&&this.size.w*t<i.width&&this.size.h*t<i.height)return!1;let s=e?{x:e.x-i.x,y:e.y-i.y}:{x:i.width/2,y:i.height/2},r=(this.e_panel.scrollLeft+s.x)*t/this.zoom_current-s.x,o=(this.e_panel.scrollTop+s.y)*t/this.zoom_current-s.y;this.zoom_current=t;for(var a=0;a<this.e_panel.children.length;a++)this.e_panel.children[a].style.zoom=t;return this._show(),this.e_panel.scrollLeft=r,this.e_panel.scrollTop=o,!0}show(t){u.debug(`view.show: {keep_center: ${t}}`),this.expand_size(),this._show(),t&&this.center_node(this.jm.mind.root)}relayout(){this.expand_size(),this._show()}save_location(t){var e=t._data.view;e._saved_location={x:parseInt(e.element.style.left)-this.e_panel.scrollLeft,y:parseInt(e.element.style.top)-this.e_panel.scrollTop}}restore_location(t){var e=t._data.view;this.e_panel.scrollLeft=parseInt(e.element.style.left)-e._saved_location.x,this.e_panel.scrollTop=parseInt(e.element.style.top)-e._saved_location.y}clear_nodes(){var t=this.jm.mind;if(t!=null){var e=t.nodes,i=null;for(var s in e)i=e[s],i._data.view.element=null,i._data.view.expander=null;this.e_nodes.innerHTML=""}}show_nodes(){var t=this.jm.mind.nodes,e=null,i=null,s=null,r=null,o=this.get_view_offset();for(var a in t){if(e=t[a],r=e._data.view,i=r.element,!this.layout.is_visible(e)){i.style.display="none",r.expander.style.display="none";continue}this.reset_node_custom_style(e),s=this.layout.get_node_point(e),r.abs_x=o.x+s.x,r.abs_y=o.y+s.y,i.style.left=o.x+s.x+"px",i.style.top=o.y+s.y+"px",i.style.display="",i.style.visibility="visible",this._show_expander(e,o)}}_show_expander(t,e){if(t.isroot)return;var i=t._data.view.expander;if(t.children.length==0){i.style.display="none",i.style.visibility="hidden";return}let s=this._get_expander_text(t);w.t(i,s);let r=this.layout.get_expander_point(t);i.style.left=e.x+r.x+"px",i.style.top=e.y+r.y+"px",i.style.display="",i.style.visibility="visible"}_get_expander_text(t){let e=this.opts.expander_style?this.opts.expander_style.toLowerCase():"char";if(e==="number")return t.children.length>99?"...":t.children.length;if(e==="char")return t.expanded?"-":"+"}_default_node_render(t,e){if(this.opts.support_html){let s=e.topic;s.length>45&&(s=s.slice(0,41)+"...");let r=(e.data.icons||[]).map(l=>`<img src="${this.resourceManager.TAG_ICONS[l]}" style="width: 16px; height: 16px; margin-right: 2px; vertical-align: middle;">`).join("");e.data.type&&e.data.type!=="Text"&&(r=r.concat(`<img src="${this.resourceManager.TYPE_ICONS[e.data.type]}" style="width: 16px; height: 16px; margin-right: 2px; vertical-align: middle;">`));let o=e.data.highlight;o&&(o=this.resourceManager.HIGHLIGHTS[o]);const a=`
              <div>
                    <span>${r}</span>
                    <span style="background: ${o}">${s}</span>
              </div>`;w.h(t,a)}else w.t(t,e.topic)}_custom_node_render(t,e){this.opts.custom_node_render(this.jm,t,e)||this._default_node_render(t,e)}reset_node_custom_style(t){this._reset_node_custom_style(t._data.view.element,t.data)}_reset_node_custom_style(t,e){if("background-color"in e&&(t.style.backgroundColor=e["background-color"]),"foreground-color"in e&&(t.style.color=e["foreground-color"]),"width"in e&&(t.style.width=e.width+"px"),"height"in e&&(t.style.height=e.height+"px"),"font-size"in e&&(t.style.fontSize=e["font-size"]+"px"),"font-weight"in e&&(t.style.fontWeight=e["font-weight"]),"font-style"in e&&(t.style.fontStyle=e["font-style"]),"background-image"in e){var i=e["background-image"];if(i.startsWith("data")&&e.width&&e.height){var s=new Image;s.onload=function(){var r=w.c("canvas");r.width=t.clientWidth,r.height=t.clientHeight;var o=this;if(r.getContext){var a=r.getContext("2d");a.drawImage(o,2,2,t.clientWidth,t.clientHeight);var l=r.toDataURL();t.style.backgroundImage="url("+l+")"}},s.src=i}else t.style.backgroundImage="url("+i+")";t.style.backgroundSize="99%","background-rotation"in e&&(t.style.transform="rotate("+e["background-rotation"]+"deg)")}}restore_selected_node_custom_style(t){var e=t._data.view.element,i=t.data;"background-color"in i&&(e.style.backgroundColor=i["background-color"]),"foreground-color"in i&&(e.style.color=i["foreground-color"])}clear_selected_node_custom_style(t){var e=t._data.view.element;e.style.backgroundColor="",e.style.color=""}clear_lines(){this.graph.clear()}show_lines(){this.clear_lines();var t=this.jm.mind.nodes,e=null,i=null,s=null,r=null,o=this.get_view_offset();for(var a in t)e=t[a],!e.isroot&&this.layout.is_visible(e)&&(i=this.layout.get_node_point_in(e),s=this.layout.get_node_point_out(e.parent),r=e.data["leading-line-color"],this.graph.draw_line(s,i,o,r))}setup_canvas_draggable(t){if(this.opts.draggable=t,!this._initialized){let e=!1,i,s;this.opts.hide_scrollbars_when_draggable&&(this.e_panel.style="overflow: hidden"),w.on(this.container,"mousedown",r=>{this.opts.draggable&&(e=!0,i=r.clientX,s=r.clientY)}),w.on(this.container,"mouseup",()=>{e=!1}),w.on(this.container,"mousemove",r=>{this.opts.draggable&&e&&(this.e_panel.scrollBy(i-r.clientX,s-r.clientY),i=r.clientX,s=r.clientY)})}}center_node(t){if(!this.layout.is_visible(t))return u.warn("can not scroll to the node, because it is invisible"),!1;let e=t._data.view,i=this.e_panel.getBoundingClientRect(),s={x:e.abs_x+e.width/2,y:e.abs_y+e.height/2};return this.e_panel.scrollTo(s.x*this.zoom_current-i.width/2,s.y*this.zoom_current-i.height/2),!0}zoomIn(t){return u.warn("please use zoom_in instead"),this.zoom_in(t)}zoomOut(t){return u.warn("please use zoom_out instead"),this.zoom_out(t)}setZoom(t,e){return u.warn("please use set_zoom instead"),this.set_zoom(t,e)}}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */class Lh{constructor(t,e){this.jm=t,this.opts=e,this.mapping=e.mapping,this.handles=e.handles,this._newid=null,this._mapping={}}init(){w.on(this.jm.view.e_panel,"keydown",this.handler.bind(this)),this.handles.addchild=this.handle_addchild,this.handles.addbrother=this.handle_addbrother,this.handles.editnode=this.handle_editnode,this.handles.delnode=this.handle_delnode,this.handles.toggle=this.handle_toggle,this.handles.up=this.handle_up,this.handles.down=this.handle_down,this.handles.left=this.handle_left,this.handles.right=this.handle_right;for(var t in this.mapping)if(this.mapping[t]&&t in this.handles){let e=this.mapping[t];Array.isArray(e)||(e=[e]);for(let i of e)this._mapping[i]=this.handles[t]}typeof this.opts.id_generator=="function"?this._newid=this.opts.id_generator:this._newid=ht.uuid.newid}enable_shortcut(){this.opts.enable=!0}disable_shortcut(){this.opts.enable=!1}handler(t){if(t.which==9&&t.preventDefault(),!this.jm.view.is_editing()){var e=t||event;if(!this.opts.enable)return!0;var i=e.keyCode+(e.metaKey<<13)+(e.ctrlKey<<12)+(e.altKey<<11)+(e.shiftKey<<10);i in this._mapping&&this._mapping[i].call(this,this.jm,t)}}handle_addchild(t,e){var i=t.get_selected_node();if(i){var s=this._newid(),r=t.add_node(i,s,"New Node");r&&(t.select_node(s),t.begin_edit(s))}}handle_addbrother(t,e){var i=t.get_selected_node();if(i&&!i.isroot){var s=this._newid(),r=t.insert_node_after(i,s,"New Node");r&&(t.select_node(s),t.begin_edit(s))}}handle_editnode(t,e){var i=t.get_selected_node();i&&t.begin_edit(i)}handle_delnode(t,e){var i=t.get_selected_node();i&&!i.isroot&&(t.select_node(i.parent),t.remove_node(i))}handle_toggle(t,e){var i=e||event,s=t.get_selected_node();s&&(t.toggle_node(s.id),i.stopPropagation(),i.preventDefault())}handle_up(t,e){var i=e||event,s=t.get_selected_node();if(s){var r=t.find_node_before(s);if(!r){var o=t.find_node_before(s.parent);o&&o.children.length>0&&(r=o.children[o.children.length-1])}r&&t.select_node(r),i.stopPropagation(),i.preventDefault()}}handle_down(t,e){var i=e||event,s=t.get_selected_node();if(s){var r=t.find_node_after(s);if(!r){var o=t.find_node_after(s.parent);o&&o.children.length>0&&(r=o.children[0])}r&&t.select_node(r),i.stopPropagation(),i.preventDefault()}}handle_left(t,e){this._handle_direction(t,e,E.left)}handle_right(t,e){this._handle_direction(t,e,E.right)}_handle_direction(t,e,i){var s=e||event,r=t.get_selected_node(),o=null;if(r){if(r.isroot){for(var a=r.children,l=[],h=0;h<a.length;h++)a[h].direction===i&&l.push(h);o=a[l[Math.floor((l.length-1)/2)]]}else if(r.direction===i){var l=r.children,c=l.length;c>0&&(o=l[Math.floor((c-1)/2)])}else o=r.parent;o&&t.select_node(o),s.stopPropagation(),s.preventDefault()}}}/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const Mi={plugins:[]};function Dh(n){if(!(n instanceof Js))throw new Error("can not register plugin, it is not an instance of Plugin");if(Mi.plugins.map(t=>t.name).includes(n.name))throw new Error("can not register plugin "+n.name+": plugin name already exist");Mi.plugins.push(n)}function $h(n,t){w.w.setTimeout(function(){Ih(n,t)},0)}function Ih(n,t){Mi.plugins.forEach(e=>e.fn_init(n,t[e.name]))}class Js{constructor(t,e){if(!t)throw new Error("plugin must has a name");if(!e||typeof e!="function")throw new Error("plugin must has an init function");this.name=t,this.fn_init=e}}var Qe,M,F;class kh{constructor(){Pt(this,Qe,10);Pt(this,M,0);Pt(this,F,[]);this.isUndoable=!1,this.isRedoable=!1}add(t){let e=JSON.stringify(t);O(this,F).splice(O(this,M)+1,O(this,F).length-O(this,M)+1,e),O(this,F).length>O(this,Qe)?O(this,F).shift():_e(this,M,O(this,F).length-1),console.log(`Saved map. Stack size: ${O(this,F).length}`),this.isUndoable=O(this,M)>0,this.isRedoable=O(this,M)<O(this,F).length-1}clear(){O(this,F).length=0,_e(this,M,0),this.isUndoable=!1,this.isRedoable=!1}undo(){if(this.isUndoable)return _e(this,M,Math.max(O(this,M)-1,0)),console.log(`Performing Undo.Current state index: ${O(this,M)}`),this.isUndoable=O(this,M)>0,this.isRedoable=!0,JSON.parse(O(this,F)[O(this,M)])}redo(){if(this.isRedoable)return _e(this,M,Math.min(O(this,M)+1,Math.max(O(this,F).length-1,0))),console.log(`Performing Redo.Current state index: ${O(this,M)}`),this.isUndoable=!0,this.isRedoable=O(this,M)<O(this,F).length-1,JSON.parse(O(this,F)[O(this,M)])}}Qe=new WeakMap,M=new WeakMap,F=new WeakMap;/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com - slightly altered
 * Altered lines are marked with '// Altered lines: --- // End'
 * 
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */const Z=class Z{constructor(t){Z.current=this,this.options=Th(t),u.level(ge[this.options.log_level]),this.version=Xs,this.initialized=!1,this.mind=null,this.event_handles=[],this.actionStack=new kh,this.init()}init(){if(!this.initialized){this.initialized=!0;var t={mode:this.options.mode,hspace:this.options.layout.hspace,vspace:this.options.layout.vspace,pspace:this.options.layout.pspace,cousin_space:this.options.layout.cousin_space},e={container:this.options.container,support_html:this.options.support_html,engine:this.options.view.engine,enable_device_pixel_ratio:this.options.view.enable_device_pixel_ratio,hmargin:this.options.view.hmargin,vmargin:this.options.view.vmargin,line_width:this.options.view.line_width,line_color:this.options.view.line_color,line_style:this.options.view.line_style,custom_line_render:this.options.view.custom_line_render,draggable:this.options.view.draggable,hide_scrollbars_when_draggable:this.options.view.hide_scrollbars_when_draggable,node_overflow:this.options.view.node_overflow,zoom:this.options.view.zoom,custom_node_render:this.options.view.custom_node_render,expander_style:this.options.view.expander_style};this.data=new Ah(this),this.layout=new xh(this,t),this.view=new Nh(this,e),this.shortcut=new Lh(this,this.options.shortcut),this.data.init(),this.layout.init(),this.view.init(),this.shortcut.init(),this._event_bind(),$h(this,this.options.plugin)}}resetStack(){this.actionStack.clear(),this.saveState()}saveState(){let t=this.get_data("node_tree");this.actionStack.add(t)}undo(){let t=this.actionStack.undo();t&&this.show(t)}redo(){let t=this.actionStack.redo();t&&this.show(t)}get_editable(){return this.options.editable}enable_edit(){this.options.editable=!0}disable_edit(){this.options.editable=!1}get_view_draggable(){return this.options.view.draggable}enable_view_draggable(){this.options.view.draggable=!0,this.view.setup_canvas_draggable(!0)}disable_view_draggable(){this.options.view.draggable=!1,this.view.setup_canvas_draggable(!1)}enable_event_handle(t){this.options.default_event_handle["enable_"+t+"_handle"]=!0}disable_event_handle(t){this.options.default_event_handle["enable_"+t+"_handle"]=!1}set_theme(t){var e=this.options.theme;this.options.theme=t||null,e!=this.options.theme&&(this.view.reset_theme(),this.view.reset_custom_style())}_event_bind(){this.view.add_event(this,"mousedown",this.mousedown_handle),this.view.add_event(this,"click",this.click_handle),this.view.add_event(this,"dblclick",this.dblclick_handle),this.view.add_event(this,"wheel",this.mousewheel_handle,!0)}mousedown_handle(t){if(this.options.default_event_handle.enable_mousedown_handle){var e=t.target||event.srcElement,i=this.view.get_binded_nodeid(e);i?this.view.is_node(e)&&this.select_node(i):this.select_clear()}}click_handle(t){if(this.options.default_event_handle.enable_click_handle){var e=t.target||event.srcElement,i=this.view.is_expander(e);if(i){var s=this.view.get_binded_nodeid(e);s&&this.toggle_node(s)}}}dblclick_handle(t){if(this.options.default_event_handle.enable_dblclick_handle&&this.get_editable()){var e=t.target||event.srcElement,i=this.view.is_node(e);if(i){var s=this.view.get_binded_nodeid(e);s&&this.begin_edit(s)}}}mousewheel_handle(t){var e=(t.metaKey<<13)+(t.ctrlKey<<12)+(t.altKey<<11)+(t.shiftKey<<10);if(!(!this.options.default_event_handle.enable_mousewheel_handle||this.options.view.zoom.mask_key!==e)){var i=t||event;i.preventDefault(),i.deltaY<0?this.view.zoom_in(i):this.view.zoom_out(i)}}begin_edit(t){if(!L.is_node(t)){var e=this.get_node(t);return e?this.begin_edit(e):(u.error("the node[id="+t+"] can not be found."),!1)}let i=t.data.type;if(["BibEntry","PDFFile"].includes(i)){console.log(`No editing for ${i} nodes >:(`);return}if(this.get_editable())this.view.edit_node_begin(t);else{u.error("fail, this mind map is not editable.");return}}end_edit(){this.view.edit_node_end()}toggle_node(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.toggle_node(e);u.error("the node[id="+t+"] can not be found.");return}t.isroot||(this.view.save_location(t),this.layout.toggle_node(t),this.view.relayout(),this.view.restore_location(t))}expand_node(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.expand_node(e);u.error("the node[id="+t+"] can not be found.");return}t.isroot||(this.view.save_location(t),this.layout.expand_node(t),this.view.relayout(),this.view.restore_location(t))}collapse_node(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.collapse_node(e);u.error("the node[id="+t+"] can not be found.");return}t.isroot||(this.view.save_location(t),this.layout.collapse_node(t),this.view.relayout(),this.view.restore_location(t))}expand_all(){this.layout.expand_all(),this.view.relayout()}collapse_all(){this.layout.collapse_all(),this.view.relayout()}expand_to_depth(t){this.layout.expand_to_depth(t),this.view.relayout()}_reset(){this.view.reset(),this.layout.reset(),this.data.reset()}_show(t,e){var i=t||S.node_array.example;if(this.mind=this.data.load(i),this.mind)u.debug("data.load ok");else{u.error("data.load error");return}this.view.load(),u.debug("view.load ok"),this.layout.layout(),u.debug("layout.layout ok"),this.view.show(!e),u.debug("view.show ok"),this.invoke_event_handle(q.show,{data:[t]})}show(t,e){this._reset(),this._show(t,e)}get_meta(){return{name:this.mind.name,author:this.mind.author,version:this.mind.version}}get_data(t){var e=t||"node_tree";return this.data.get_data(e)}get_root(){return this.mind.root}get_node(t){return L.is_node(t)?t:this.mind.get_node(t)}add_node(t,e,i,s,r){if(this.get_editable()){var o=this.get_node(t),a=E.of(r);a===void 0&&(a=this.layout.calculate_next_child_direction(o));var l=this.mind.add_node(o,e,i,s,a);return l&&(this.view.add_node(l),this.layout.layout(),this.view.show(!1),this.view.reset_node_custom_style(l),this.expand_node(o),this.invoke_event_handle(q.edit,{evt:"add_node",data:[o.id,e,i,s,a],node:e})),l}else return u.error("fail, this mind map is not editable"),null}insert_node_before(t,e,i,s,r){if(this.get_editable()){var o=this.get_node(t),a=E.of(r);a===void 0&&(a=this.layout.calculate_next_child_direction(o.parent));var l=this.mind.insert_node_before(o,e,i,s,a);return l&&(this.view.add_node(l),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(q.edit,{evt:"insert_node_before",data:[o.id,e,i,s,a],node:e})),l}else return u.error("fail, this mind map is not editable"),null}insert_node_after(t,e,i,s,r){if(this.get_editable()){var o=this.get_node(t),a=E.of(r);a===void 0&&(a=this.layout.calculate_next_child_direction(o.parent));var l=this.mind.insert_node_after(o,e,i,s,a);return l&&(this.view.add_node(l),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(q.edit,{evt:"insert_node_after",data:[o.id,e,i,s,a],node:e})),l}else return u.error("fail, this mind map is not editable"),null}remove_node(t){if(!L.is_node(t)){var e=this.get_node(t);return e?this.remove_node(e):(u.error("the node[id="+t+"] can not be found."),!1)}if(this.get_editable()){if(t.isroot)return u.error("fail, can not remove root node"),!1;var i=t.id,s=t.parent.id,r=this.get_node(s);return this.view.save_location(r),this.view.remove_node(t),this.mind.remove_node(t),this.layout.layout(),this.view.show(!1),this.view.restore_location(r),this.invoke_event_handle(q.edit,{evt:"remove_node",data:[i],node:s}),!0}else return u.error("fail, this mind map is not editable"),!1}update_node(t,e){if(this.get_editable()){if(ht.text.is_empty(e)){u.warn("fail, topic can not be empty");return}var i=this.get_node(t);i&&(i.topic=e,this.view.update_node(i),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(q.edit,{evt:"update_node",data:[t,e],node:t}))}else{u.error("fail, this mind map is not editable");return}}move_node(t,e,i,s){if(this.get_editable()){var r=this.get_node(t),o=this.mind.move_node(r,e,i,s);o&&(this.view.update_node(o),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(q.edit,{evt:"move_node",data:[t,e,i,s],node:t}))}else{u.error("fail, this mind map is not editable");return}}select_node(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.select_node(e);u.error("the node[id="+t+"] can not be found.");return}this.layout.is_visible(t)&&(this.mind.selected=t,this.view.select_node(t),this.invoke_event_handle(q.select,{evt:"select_node",data:[],node:t.id}))}get_selected_node(){return this.mind?this.mind.selected:null}select_clear(){this.mind&&(this.mind.selected=null,this.view.select_clear(),this.invoke_event_handle(q.select,{evt:"select_node",data:[],node:""}))}is_node_visible(t){return this.layout.is_visible(t)}scroll_node_to_center(t){if(!L.is_node(t)){var e=this.get_node(t);e?this.scroll_node_to_center(e):u.error("the node[id="+t+"] can not be found.");return}this.view.center_node(t)}find_node_before(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.find_node_before(e);u.error("the node[id="+t+"] can not be found.");return}if(t.isroot)return null;var i=null;if(t.parent.isroot)for(var s=t.parent.children,r=null,o=null,a=0;a<s.length;a++)o=s[a],t.direction===o.direction&&(t.id===o.id&&(i=r),r=o);else i=this.mind.get_node_before(t);return i}find_node_after(t){if(!L.is_node(t)){var e=this.get_node(t);if(e)return this.find_node_after(e);u.error("the node[id="+t+"] can not be found.");return}if(t.isroot)return null;var i=null;if(t.parent.isroot){for(var s=t.parent.children,r=!1,o=null,a=0;a<s.length;a++)if(o=s[a],t.direction===o.direction){if(r){i=o;break}t.id===o.id&&(r=!0)}}else i=this.mind.get_node_after(t);return i}set_node_color(t,e,i){if(this.get_editable()){var s=this.mind.get_node(t);s&&(e&&(s.data["background-color"]=e),i&&(s.data["foreground-color"]=i),this.view.reset_node_custom_style(s))}else return u.error("fail, this mind map is not editable"),null}set_node_font_style(t,e,i,s){if(this.get_editable()){var r=this.mind.get_node(t);r&&(e&&(r.data["font-size"]=e),i&&(r.data["font-weight"]=i),s&&(r.data["font-style"]=s),this.view.reset_node_custom_style(r),this.view.update_node(r),this.layout.layout(),this.view.show(!1))}else return u.error("fail, this mind map is not editable"),null}set_node_background_image(t,e,i,s,r){if(this.get_editable()){var o=this.mind.get_node(t);o&&(e&&(o.data["background-image"]=e),i&&(o.data.width=i),s&&(o.data.height=s),r&&(o.data["background-rotation"]=r),this.view.reset_node_custom_style(o),this.view.update_node(o),this.layout.layout(),this.view.show(!1))}else return u.error("fail, this mind map is not editable"),null}set_node_background_rotation(t,e){if(this.get_editable()){var i=this.mind.get_node(t);if(i){if(!i.data["background-image"])return u.error("fail, only can change rotation angle of node with background image"),null;i.data["background-rotation"]=e,this.view.reset_node_custom_style(i),this.view.update_node(i),this.layout.layout(),this.view.show(!1)}}else return u.error("fail, this mind map is not editable"),null}resize(){this.view.resize()}add_event_listener(t){typeof t=="function"&&this.event_handles.push(t)}clear_event_listener(){this.event_handles=[]}invoke_event_handle(t,e){var i=this;w.w.setTimeout(function(){i._invoke_event_handle(t,e)},0)}_invoke_event_handle(t,e){for(var i=this.event_handles.length,s=0;s<i;s++)this.event_handles[s](t,e)}static show(t,e){u.warn("`jsMind.show(options, mind)` is deprecated, please use `jm = new jsMind(options); jm.show(mind);` instead");var i=new Z(t);return i.show(e),i}};J(Z,"mind",ve),J(Z,"node",L),J(Z,"direction",E),J(Z,"event_type",q),J(Z,"$",w),J(Z,"plugin",Js),J(Z,"register_plugin",Dh),J(Z,"util",ht);let I=Z;/**
 * @license BSD
 * @copyright 2014-2025 hizzgdev@163.com
 *
 * Project Home:
 *   https://github.com/hizzgdev/jsmind/
 */if(!I)throw new Error("jsMind is not defined");const j=I.$,qn="getSelection"in j.w?function(){j.w.getSelection().removeAllRanges()}:function(){j.d.selection.empty()},Mh={line_width:5,line_color:"rgba(0,0,0,0.3)",line_color_invalid:"rgba(255,51,51,0.6)",lookup_delay:200,lookup_interval:100,scrolling_trigger_width:20,scrolling_step_length:10,shadow_node_class_name:"jsmind-draggable-shadow-node"};class Ph{constructor(t,e){var i={};I.util.json.merge(i,Mh),I.util.json.merge(i,e),this.version="0.4.0",this.jm=t,this.options=i,this.e_canvas=null,this.canvas_ctx=null,this.shadow=null,this.shadow_p_x=0,this.shadow_p_y=0,this.shadow_w=0,this.shadow_h=0,this.active_node=null,this.target_node=null,this.target_direct=null,this.client_w=0,this.client_h=0,this.offset_x=0,this.offset_y=0,this.hlookup_delay=0,this.hlookup_timer=0,this.capture=!1,this.moved=!1,this.canvas_draggable=t.get_view_draggable(),this.view_panel=t.view.e_panel,this.view_panel_rect=null}init(){this.create_canvas(),this.create_shadow(),this.event_bind()}resize(){this.jm.view.e_nodes.appendChild(this.shadow),this.e_canvas.width=this.jm.view.size.w,this.e_canvas.height=this.jm.view.size.h}create_canvas(){var t=j.c("canvas");this.jm.view.e_panel.appendChild(t);var e=t.getContext("2d");this.e_canvas=t,this.canvas_ctx=e}create_shadow(){var t=j.c("jmnode");t.style.visibility="hidden",t.style.zIndex="3",t.style.cursor="move",t.style.opacity="0.7",t.className=this.options.shadow_node_class_name,this.shadow=t}reset_shadow(t){var e=this.shadow.style;this.shadow.innerHTML=t.innerHTML,e.left=t.style.left,e.top=t.style.top,e.width=t.style.width,e.height=t.style.height,e.backgroundImage=t.style.backgroundImage,e.backgroundSize=t.style.backgroundSize,e.transform=t.style.transform,this.shadow_w=this.shadow.clientWidth,this.shadow_h=this.shadow.clientHeight}show_shadow(){this.moved||(this.shadow.style.visibility="visible")}hide_shadow(){this.shadow.style.visibility="hidden"}magnet_shadow(t,e,i){this.canvas_ctx.lineWidth=this.options.line_width,this.canvas_ctx.strokeStyle=i?this.options.line_color_invalid:this.options.line_color,this.canvas_ctx.lineCap="round",this.clear_lines(),this.canvas_lineto(t.x,t.y,e.x,e.y)}clear_lines(){this.canvas_ctx.clearRect(0,0,this.jm.view.size.w,this.jm.view.size.h)}canvas_lineto(t,e,i,s){this.canvas_ctx.beginPath(),this.canvas_ctx.moveTo(t,e),this.canvas_ctx.lineTo(i,s),this.canvas_ctx.stroke()}event_bind(){var t=this,e=this.jm.view.container;j.on(e,"mousedown",function(i){i.button===0&&t.dragstart.call(t,i)}),j.on(e,"mousemove",function(i){(i.movementX!==0||i.movementY!==0)&&t.drag.call(t,i)}),j.on(e,"mouseup",function(i){t.dragend.call(t,i)}),j.on(e,"touchstart",function(i){t.dragstart.call(t,i)}),j.on(e,"touchmove",function(i){t.drag.call(t,i)}),j.on(e,"touchend",function(i){t.dragend.call(t,i)})}dragstart(t){if(this.jm.get_editable()&&!this.capture){var e=this.jm.view;if(!e.is_editing()){this.active_node=null,this.view_draggable=this.jm.get_view_draggable();var i=this.find_node_element(t.target);if(i){this.view_draggable&&this.jm.disable_view_draggable();var s=e.get_binded_nodeid(i);if(s){var r=this.jm.get_node(s);if(!r.isroot){this.reset_shadow(i),this.view_panel_rect=this.view_panel.getBoundingClientRect(),this.active_node=r,this.offset_x=(t.clientX||t.touches[0].clientX)/e.zoom_current-i.offsetLeft,this.offset_y=(t.clientY||t.touches[0].clientY)/e.zoom_current-i.offsetTop,this.client_hw=Math.floor(i.clientWidth/2),this.client_hh=Math.floor(i.clientHeight/2),this.hlookup_delay!=0&&j.w.clearTimeout(this.hlookup_delay),this.hlookup_timer!=0&&j.w.clearInterval(this.hlookup_timer);var o=this;this.hlookup_delay=j.w.setTimeout(function(){o.hlookup_delay=0,o.hlookup_timer=j.w.setInterval(function(){o.lookup_target_node.call(o)},o.options.lookup_interval)},this.options.lookup_delay),o.capture=!0}}}}}}drag(t){if(this.jm.get_editable()&&this.capture){t.preventDefault(),this.show_shadow(),this.moved=!0,qn();var e=this.jm.view,i=(t.clientX||t.touches[0].clientX)/e.zoom_current-this.offset_x,s=(t.clientY||t.touches[0].clientY)/e.zoom_current-this.offset_y;t.clientY-this.view_panel_rect.top<this.options.scrolling_trigger_width&&this.view_panel.scrollTop>this.options.scrolling_step_length?(this.view_panel.scrollBy(0,-this.options.scrolling_step_length),this.offset_y+=this.options.scrolling_step_length/e.zoom_current):this.view_panel_rect.bottom-t.clientY<this.options.scrolling_trigger_width&&this.view_panel.scrollTop<this.view_panel.scrollHeight-this.view_panel_rect.height-this.options.scrolling_step_length&&(this.view_panel.scrollBy(0,this.options.scrolling_step_length),this.offset_y-=this.options.scrolling_step_length/e.zoom_current),t.clientX-this.view_panel_rect.left<this.options.scrolling_trigger_width&&this.view_panel.scrollLeft>this.options.scrolling_step_length?(this.view_panel.scrollBy(-this.options.scrolling_step_length,0),this.offset_x+=this.options.scrolling_step_length/e.zoom_current):this.view_panel_rect.right-t.clientX<this.options.scrolling_trigger_width&&this.view_panel.scrollLeft<this.view_panel.scrollWidth-this.view_panel_rect.width-this.options.scrolling_step_length&&(this.view_panel.scrollBy(this.options.scrolling_step_length,0),this.offset_x-=this.options.scrolling_step_length/e.zoom_current),this.shadow.style.left=i+"px",this.shadow.style.top=s+"px",qn()}}dragend(t){if(this.jm.get_editable()){if(this.view_draggable&&this.jm.enable_view_draggable(),this.capture){if(this.hlookup_delay!=0&&(j.w.clearTimeout(this.hlookup_delay),this.hlookup_delay=0,this.clear_lines()),this.hlookup_timer!=0&&(j.w.clearInterval(this.hlookup_timer),this.hlookup_timer=0,this.clear_lines()),this.moved){var e=this.active_node,i=this.target_node,s=this.target_direct;this.move_node(e,i,s)}this.hide_shadow()}this.view_panel_rect=null,this.moved=!1,this.capture=!1}}find_node_element(t){return t===this.jm.view.e_nodes||t===this.jm.view.e_panel||t===this.jm.view.container?null:t.tagName.toLowerCase()==="jmnode"?t:this.find_node_element(t.parentNode)}lookup_target_node(){let t=this.shadow.offsetLeft,e=this.shadow.offsetTop;if(t===this.shadow_p_x&&e===this.shadow_p_y)return;this.shadow_p_x=t,this.shadow_p_y=e;let i=this.shadow_p_x+this.shadow_w/2>=this.get_root_x()?I.direction.right:I.direction.left,r=this.lookup_overlapping_node_parent(i)||this.lookup_close_node(i);if(r){let o=this.calc_point_of_node(r,i),a=I.node.inherited(this.active_node,r);this.magnet_shadow(o.sp,o.np,a),this.target_node=r,this.target_direct=i}}get_root_x(){let t=this.jm.get_root(),e=t.get_location(),i=t.get_size();return e.x+i.w/2}lookup_overlapping_node_parent(t){let e=this.shadow.getBoundingClientRect(),i=e.x+e.width*(1-t)/2,s=(this.jm.options.layout.hspace+this.jm.options.layout.pspace)*t,r=e.height,o=[[i,e.y],[i,e.y+r/2],[i,e.y+r],[i+s/2,e.y],[i+s/2,e.y+r/2],[i+s/2,e.y+r],[i+s,e.y],[i+s,e.y+r/2],[i+s,e.y+r]];for(const a of o){let l=this.lookup_node_parent_by_location(a[0],a[1]);if(l)return l}}lookup_node_parent_by_location(t,e){return j.d.elementsFromPoint(t,e).filter(i=>i.tagName==="JMNODE"&&i.className!==this.options.shadow_node_class_name).map(i=>this.jm.view.get_binded_nodeid(i)).map(i=>i&&this.jm.mind.nodes[i]).map(i=>i&&i.parent).find(i=>i)}lookup_close_node(t){return Object.values(this.jm.mind.nodes).filter(e=>e.direction==t||e.isroot).filter(e=>this.jm.layout.is_visible(e)).filter(e=>this.shadow_on_target_side(e,t)).map(e=>({node:e,distance:this.shadow_to_node(e,t)})).reduce((e,i)=>e.distance<i.distance?e:i,{node:this.jm.get_root(),distance:Number.MAX_VALUE}).node}shadow_on_target_side(t,e){return e==I.direction.right&&this.shadow_to_right_of_node(t)>0||e==I.direction.left&&this.shadow_to_left_of_node(t)>0}shadow_to_right_of_node(t){return this.shadow_p_x-t.get_location().x-t.get_size().w}shadow_to_left_of_node(t){return t.get_location().x-this.shadow_p_x-this.shadow_w}shadow_to_base_line_of_node(t){return this.shadow_p_y+this.shadow_h/2-t.get_location().y-t.get_size().h/2}shadow_to_node(t,e){let i=e===I.direction.right?Math.abs(this.shadow_to_right_of_node(t)):Math.abs(this.shadow_to_left_of_node(t)),s=Math.abs(this.shadow_to_base_line_of_node(t));return i+s}calc_point_of_node(t,e){let i=t.get_size(),s=t.get_location(),r=t.isroot?s.x+i.w/2:s.x+i.w*(1+e)/2+this.options.line_width*e,o=s.y+i.h/2,a=this.shadow_p_x+this.shadow_w*(1-e)/2-this.options.line_width*e,l=this.shadow_p_y+this.shadow_h/2;return{sp:{x:a,y:l},np:{x:r,y:o}}}move_node(t,e,i){var s=this.shadow.offsetTop;if(e&&t&&!I.node.inherited(t,e)){for(var r=e.children,o=r.length,a=null,l=Number.MAX_VALUE,h=null,c="_last_";o--;)if(a=r[o],a.direction==i&&a.id!=t.id){var f=a.get_location().y-s;f>0&&f<l&&(l=f,h=a,c="_first_")}h&&(c=h.id),this.jm.move_node(t.id,c,e.id,i)}this.active_node=null,this.target_node=null,this.target_direct=null}jm_event_handle(t,e){t===I.event_type.resize&&this.resize()}}var Rh=new I.plugin("draggable_node",function(n,t){var e=new Ph(n,t);e.init(),n.add_event_listener(function(i,s){e.jm_event_handle.call(e,i,s)})});I.register_plugin(Rh);var Ee,at,pt;class jh{constructor(){Pt(this,at);Pt(this,Ee,"http://localhost:23119/");this.currentLibrary="demo"}async isConnected(){try{return await fetch(O(this,Ee)),!0}catch{return!1}}async loadMap(t="demo"){const e=`libraries/${t}/map`,i={method:"GET",headers:{Accept:"application/json"}},s=await R(this,at,pt).call(this,e,i);return s.code===Et.Success&&(this.currentLibrary=t,console.log(`Current library is now: ${this.currentLibrary}`)),s}async saveMap(t){const e=`libraries/${this.currentLibrary}/map`,i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({map:t})};return R(this,at,pt).call(this,e,i)}async listMaps(){const t="libraries",e={method:"GET",headers:{Accept:"application/json"}};return R(this,at,pt).call(this,t,e)}async listEntries(){const t={method:"GET",headers:{"Content-Type":"application/json"}};return R(this,at,pt).call(this,this.currentLibrary,t)}async getCiteKeysWithCAYW(){let t="better-bibtex/cayw";t+=`?libraryid=${this.currentLibrary}&format=simple-json`,console.log(t);const e={method:"GET",headers:{Accept:"application/json"}};let i=await R(this,at,pt).call(this,t,e),s=i.value;if(i.code!==Et.Success)return null;let r=[];for(let o of s)r.push(o.citationKey);return r}async getPreviewString(t){const e=`libraries/${this.currentLibrary}/entries/${t}`,i={method:"GET",headers:{Accept:"text/plain"}};return R(this,at,pt).call(this,e,i)}async getPreviewHTML(t){const e=`libraries/${this.currentLibrary}/entries/${t}`,i={method:"GET",headers:{Accept:"text/html"}};return R(this,at,pt).call(this,e,i)}async getPDFFiles(){const t=`libraries/${this.currentLibrary}/entries/pdffiles`,e={method:"GET",headers:{Accept:"application/json"}};return R(this,at,pt).call(this,t,e)}}Ee=new WeakMap,at=new WeakSet,pt=async function(t,e=null){let i={code:Et.Refused,value:null},s="";const r=O(this,Ee).concat(t);e=e??{method:"PUT",headers:{"Content-Type":"application/json"}};try{const o=await fetch(r,e);if(!o.ok)throw new Error("Request's result is not ok ( -.-)");i.code=Et.Failed,e.method!=="PUT"&&(e.headers.Accept==="application/json"&&(i.value=await o.json()),e.headers.Accept==="text/plain"&&(i.value=await o.text()),e.headers.Accept==="text/html"&&(i.value=await o.text())),i.code=Et.Success,s=`${e.method} ${r} Request succeeded (~ UwU)~(${o.status}).
Output:
${JSON.stringify(i,null,2)}`}catch(o){console.error(o),s=`${e.method} ${r} Request failed (.'T_T)`,typeof response<"u"&&(s+=`-(${response.status}).
Options:
${e}`)}return console.log(s),i};const Et=Object.freeze({Refused:-1,Failed:0,Success:1});var V,Zs,tr,er,We,Ke;const tt=class tt{static setLayout(t,e=lt.Failed){var i,s,r;if(!Object.values(lt).includes(e)){console.log(`Tried to set undefined layout (${e}) to a modal.`);return}if(e===lt.Failed){R(i=tt,V,er).call(i,t);return}if(e===lt.Loading){R(s=tt,V,Zs).call(s,t);return}if(e===lt.Steady){R(r=tt,V,tr).call(r,t);return}}};V=new WeakSet,Zs=function(t){var e,i;R(e=tt,V,We).call(e,t,t.loadingText),R(i=tt,V,Ke).call(i,t,!1)},tr=function(t){var e,i;R(e=tt,V,We).call(e,t),R(i=tt,V,Ke).call(i,t,!0)},er=function(t){var e,i;R(e=tt,V,We).call(e,t,t.failText),R(i=tt,V,Ke).call(i,t,!1)},We=function(t,e=null){t.infoTextElement.innerText=e,t.infoTextElement.hidden=e==null},Ke=function(t,e){t.selectElement.hidden=!e,t.confirmButtonElement.disabled=!e},Pt(tt,V);let Tt=tt;const lt=Object.freeze({Loading:0,Steady:1,Failed:-1});class ir{constructor(t,e,i,s,r,o="Loading. Please wait a second...",a="No data could be loaded."){this.referenceModalElement=t,this.titleElement=e,this.infoTextElement=i,this.selectElement=s,this.confirmButtonElement=r,this.loadingText=o,this.failText=a,this.selectOptions=[]}fillSelect(t,e){if(!this.selectElement){console.log("Cannot fill undefined select element of modal.");return}this.selectElement.innerHTML="";for(let i=0;i<t.length;i++)this.selectElement.innerHTML+=`<option value=${t[i]}>${e[i]}</option>`;this.selectOptions=t}getSelectedOptions(){if(!this.selectElement)return console.warn("Cannot retrieve an option of undefined select element."),null;let t=Array.from(this.selectElement.selectedOptions).map(e=>this.selectOptions[e.index]);return!t||(t==null?void 0:t.length)===0?(console.warn("Couldn't get an option because nothing was selected."),null):t}toggle(){if(!this.referenceModalElement){console.warn("The modal doesn't have any reference to toggle ( ._.)");return}let t=Ht.getOrCreateInstance(this.referenceModalElement);t.focus?t.hide():t.show()}}let Bh={meta:{name:"JabMap",author:"JabMap",version:"1.0"},format:"node_tree",data:{id:"root",topic:"Welcome to JabMap!",expanded:!0,icons:[],highlight:null,type:"Text"}};const nr={container:"jsmind_container",editable:!0,theme:null,mode:"full",support_html:!0,view:{engine:"canvas",hmargin:100,vmargin:50,line_width:3,line_color:"#555",line_style:"curved",custom_line_render:null,draggable:!0,hide_scrollbars_when_draggable:!1,node_overflow:"hidden"},layout:{hspace:30,vspace:20,pspace:13,cousin_space:0},shortcut:{enable:!0,mapping:{addchild:[45,4109],addbrother:13,editnode:113,delnode:[46,8],toggle:32,left:37,up:38,right:39,down:40,undo:4186,redo:5210,save:4179,load:4175,addBibChild:4162,addPDFChild:4176,toggleTag:[4145,4146,4147,4150,4151,4152,4153],toggleHighlight:[4148,4149]}}},sr=JSON.parse(JSON.stringify(nr));sr.editable=!1;sr.shortcut.enable=!1;class ye{static extendNode(t){t&&(t.icons=t.icons??[],t.highlight=t.highlight??null,ye.setNodeType(t),t.children&&t.children.map(e=>{ye.extendNode(e)}))}static setNodeType(t){if(t.type="Text",t.citeKey){t.type="BibEntry";return}if(t.parentCitationKey){t.type="PDFFile";return}}}let Ot=new jh;async function rr(){let n="flex",t="none";await Ot.isConnected()||(m.select_clear(),n="none",t="flex"),topNavBar.style.display=n,jsmind_container.style.display=n,noConnectionBlock.style.display=t}rr();tryAgainBtn.onclick=rr;let Zi=Bh;const or=nr;or.shortcut.handles={undo:function(n,t){oe(),n.undo()},redo:function(n,t){oe(),n.redo()},toggleTag:function(n,t){let e=n.get_selected_node();e&&hr(e,t.key)},toggleHighlight:function(n,t){let e=n.get_selected_node();e&&Kh(e,t.key)},save:function(n,t){saveBtn.onclick()},load:function(n,t){Jt.toggle(),openBtn.onclick()},addBibChild:function(n,t){n.get_selected_node()&&addBibEntryAsChildBtn.onclick()},addPDFChild:function(n,t){n.get_selected_node()&&(Zt.toggle(),addPDFAsChildBtn.onclick())}};ye.extendNode(Zi.data);const m=new I(or);m.add_event_listener((n,t)=>{if(n===I.event_type.show&&(cr(),m.select_clear(),redoBtn.disabled=!m.actionStack.isRedoable,undoBtn.disabled=!m.actionStack.isUndoable),n===I.event_type.edit&&(oe(),["move_node","remove_node"].includes(t.evt)&&m.saveState(),redoBtn.disabled=!m.actionStack.isRedoable,undoBtn.disabled=!m.actionStack.isUndoable),n===I.event_type.select){oe();let e=!!m.get_selected_node(),i=[newChildBtn,newSiblingBtn,tagsDropdownMenuButton,BibEntryDropdownMenuButton,PDFDropDownMenuButton];zh(i,e)}});m.show(Zi);m.resetStack();function zh(n,t){n.forEach(e=>{ct.getOrCreateInstance(e).hide(),e.disabled=!t})}undoBtn.onclick=function(){oe(),m.undo()};redoBtn.onclick=function(){oe(),m.redo()};let Vh="Listing available mind maps...",Hh="No mind maps were found. Try to create one in JabRef first.",Jt=new ir(selectMindmapModal,exampleModalLabel,openMindmapInfoText,openMindmapSelect,openSelectedMapBtn,Vh,Hh);saveBtn.onclick=async function(){let n=m.get_data();if(!Ot||!n){console.error("Error: Cannot save mind map.");return}Ot.saveMap(n)};openBtn.onclick=async function(){Tt.setLayout(Jt,lt.Loading);let n=await Ot.listMaps(),t=n.value;if(n.code!==Et.Success||(t==null?void 0:t.length)<=0){Tt.setLayout(Jt,lt.Failed);return}Tt.setLayout(Jt,lt.Steady),Jt.fillSelect(t,t)};openSelectedMapBtn.onclick=async function(){var i;let n=Jt.getSelectedOptions();if(!n){console.warn("Couldn't open map because no library was selected.");return}let t=await Ot.loadMap(n[0]);t.code!==Et.Success&&console.warn(`Failed to load ${n[0]} mind map. Loading the default one.`);let e=((i=t.value)==null?void 0:i.map)??Zi;ye.extendNode(e.data),m.show(e),m.resetStack()};newSiblingBtn.onclick=function(){m&&m.shortcut.handle_addbrother(m,null)};newChildBtn.onclick=function(){m&&m.shortcut.handle_addchild(m,null)};async function ar(){let n=await Ot.getCiteKeysWithCAYW();if(!n)return console.warn("There're no citation keys to create nodes from ( ,_,)"),null;let t=[];for(let e=0;e<n.length;e++)t.push({key:n[e],preview:(await Ot.getPreviewHTML(n[e])).value});return t}function lr(n,t){let e=m.get_selected_node();if(!e){console.log("Fail: No node's selected to add BibEntries to :(");return}n.forEach(i=>{t(e,ht.uuid.newid(),i.key,{type:"BibEntry",citeKey:i.key,preview:i.preview})}),m.saveState(),cr()}function oe(){document.querySelectorAll(".popover").forEach(n=>{n.remove()})}function cr(){document.querySelectorAll("jmnode").forEach(t=>{var r;if(t.getAttribute("data-bs-toggle")==="popover")return;const e=t.getAttribute("nodeid");if(!e)return;const i=m.get_node(e);if(((r=i==null?void 0:i.data)==null?void 0:r.type)!=="BibEntry")return;const s=i.data.preview;t.setAttribute("data-bs-toggle","popover"),t.setAttribute("data-bs-trigger","hover focus"),t.setAttribute("data-bs-placement","bottom"),t.setAttribute("data-bs-html","true"),t.setAttribute("title","BibTex Preview"),t.setAttribute("data-bs-content",s),new si(t,{container:"body"})})}addBibEntryAsChildBtn.onclick=async function(){const n=await ar();if(!n){console.warn("Fail: There're no BibEntry nodes to add as children ( ,_,)");return}lr(n,(t,e,i,s)=>{m.add_node(t,e,i,s)})};addBibEntryAsSiblingBtn.onclick=async function(){const n=await ar();if(!n){console.warn("Fail: There're no BibEntry nodes to add as siblings ( ,_,)");return}lr(n,(t,e,i,s)=>{m.insert_node_after(t,e,i,s)})};let Fh="Loading PDFs from current library...",Wh="There're no PDFs in current library.",Zt=new ir(selectPDFModal,SelectPDFModalLabel,PDFModalInfoText,addPDFSelect,addSelectedPDFBtn,Fh,Wh),tn="child";addPDFAsSiblingBtn.onclick=function(){tn="sibling"};addPDFAsChildBtn.onclick=function(){tn="child"};selectPDFModal.addEventListener("show.bs.modal",async()=>{Tt.setLayout(Zt,lt.Loading);let n=await Ot.getPDFFiles(),t=n.value;if(n.code!==Et.Success||(t==null?void 0:t.length)<=0){Tt.setLayout(Zt,lt.Failed);return}Tt.setLayout(Zt,lt.Steady),Zt.fillSelect(t,t.map(e=>e.fileName))});addSelectedPDFBtn.onclick=function(){const n=m.get_selected_node();if(!n){console.warn("Fail: No node's selected to add PDFs to :(");return}let t=Zt.getSelectedOptions();if(!t){console.warn("There're no PDFs to create nodes from ( ,_,)");return}t.forEach(e=>{const i=ht.uuid.newid(),s={type:"PDFFile",parentCitationKey:e.parentCitationKey,path:e.path,fileName:e.fileName};tn==="sibling"?m.insert_node_after(n,i,e.fileName,s):m.add_node(n,i,e.fileName,s)}),m.saveState()};function hr(n,t){let e={1:["unchecked","checked"],2:["star"],3:["question_mark"],6:["warning"],7:["light_bulb"],8:["green_flag"],9:["red_flag"]};n.data.icons=n.data.icons??[];const i=n.data.icons,s=e[t];let r=i.find(function(a){return s.includes(a)}),o=i.indexOf(r);r||n.data.icons.push(s[0]),r===s[s.length-1]?n.data.icons.splice(o,1):n.data.icons[o]=s[s.indexOf(r)+1],m.update_node(n.id,n.topic),m.saveState()}function Kh(n,t){n.data.highlight=n.data.highlight!==t?t:null,m.update_node(n.id,n.topic),m.saveState()}[iconCycleBtn,iconStarBtn,iconQuestionBtn,iconWarningBtn,iconLightbulbBtn,iconGreenFlagBtn,iconRedFlagBtn].forEach((n,t)=>{t=t>=3?t+2:t,n.onclick=function(){m!=null&&hr(m.get_selected_node(),t+1)}});let Gn=!1;document.addEventListener("keydown",n=>{n.ctrlKey&&(m.get_selected_node()&&!m.view.editing_node||Gn)&&n.preventDefault(),Gn=document.activeElement.classList.contains("jsmind-inner")});document.addEventListener("hide.bs.modal",function(n){document.activeElement&&document.activeElement.blur()});document.addEventListener("show.bs.modal",function(n){document.activeElement&&document.activeElement.blur()});
